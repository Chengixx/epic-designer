(function(o,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(o=typeof globalThis<"u"?globalThis:o||self,e(o["k-form-design"]={},o.Vue))})(this,function(o,e){"use strict";var S=Object.defineProperty;var b=(o,e,s)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var y=(o,e,s)=>(b(o,typeof e!="symbol"?e+"":e,s),s);class s{constructor(){y(this,"components",{})}addComponent(r,l,m="value"){l.bindModel=m,this.components[r]=l}getComponents(){return this.components}getComponent(r){return this.components[r]}}const u=new s,B=e.defineComponent({__name:"KFormItem",props:{record:{type:Object,require:!0},model:{type:Object},modelValue:{}},emits:["update:modelValue"],setup(c,{emit:r}){const l=c,m=u.getComponent("FormItem"),{record:n}=l,d=u.getComponents()[n.component],i={...n.componentProps,is:d,style:"width: 100%;",[d.bindModel]:l.modelValue,[`onUpdate:${d.bindModel}`]:g};function g(p){r("update:modelValue",p)}return e.onMounted(()=>{i.defaultValue&&g(i.defaultValue)}),(p,t)=>(e.openBlock(),e.createBlock(e.unref(m),e.mergeProps(e.unref(n),{name:e.unref(n).field}),{default:e.withCtx(()=>[e.renderSlot(p.$slots,e.unref(n).slot,{value:l.modelValue,model:l.model,record:e.unref(n)},()=>[e.createVNode(e.unref(d),e.normalizeProps(e.guardReactiveProps(i)),null,16)])]),_:3},16,["name"]))}}),V=e.defineComponent({__name:"KFormBuild",props:{formSchema:{type:Object}},setup(c,{expose:r}){const l=c,m=u.getComponent("Form");let n=e.reactive({});const h=e.ref(null),d=e.computed(()=>{var t;return{...(t=l.formSchema)==null?void 0:t.config}});function i(){return new Promise(async(t,k)=>{var f;try{await((f=h.value)==null?void 0:f.validateFields()),t(n)}catch(a){k(a)}})}function g(t){Object.assign(n,t)}function p(t){return t||""}return r({getData:i,setData:g}),(t,k)=>(e.openBlock(),e.createBlock(e.unref(m),e.mergeProps({ref_key:"form",ref:h,model:e.unref(n)},e.unref(d)),{default:e.withCtx(()=>{var f;return[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((f=l.formSchema)==null?void 0:f.nodes,(a,P)=>(e.openBlock(),e.createBlock(B,{modelValue:e.unref(n)[a.field],"onUpdate:modelValue":_=>e.unref(n)[a.field]=_,model:e.unref(n),key:P,record:a},e.createSlots({_:2},[a.slot?{name:p(a.slot),fn:e.withCtx(_=>[e.renderSlot(t.$slots,a.slot,e.normalizeProps(e.guardReactiveProps(_||{})))]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","model","record"]))),128))]}),_:3},16,["model"]))}}),C=[V],F={install(c){C.forEach(r=>{c.component(r.__name,r)})}};o.KFormBuild=V,o.default=F,o.pluginManager=u,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
