import{f as w,s as E,k as M,o as u,c as y,a as v,j as D,u as t,af as U,v as j,h as N,i as _,F as q,l as z,r as O,w as R,G as T,Q as k,O as G,D as L,m as x,P,q as Q,H as Y}from"../app.b39b64a1.js";import{k as B,A as Z,T as C,f as $,M as V}from"../guide_components_k-designer.md.7bfd4eea.js";import{A as J}from"./vuedraggable.umd.5428b8f7.033cc715.js";import"./commonjsHelpers.da91e947.2c5a3ee2.js";const W=["onClick","onMouseover"],X={class:"action-box"},ee={class:"action-item"},te=["onClick"],oe=v("span",{class:"iconfont icon-fuzhi3"},null,-1),se=[oe],ne=["onClick"],ae=v("span",{class:"iconfont icon-shanchu1"},null,-1),le=[ae],ie=w({__name:"KEditNodeItem",props:{schemas:{type:Array}},emits:["update:schemas"],setup(f,{emit:l}){const r=f,n=E("designer"),d=E("schemas"),c=O(""),a=M({get(){return r.schemas},set(o){l("update:schemas",o)}});R(a,o=>{var s;o!=null&&o.length&&(c.value=(s=o[0].id)!=null?s:"")},{immediate:!0});function b(o){n.setCheckedNode(a.value[o])}function H(){n.setDisableHover(),C.push(d.value,"\u62D6\u62FD\u7EC4\u4EF6")}function I(){C.push(d.value,"\u63D2\u5165\u7EC4\u4EF6")}function K(o,s,e){var m;const i=$({...Y(s),id:V()});o.splice(e+1,0,i);const p=i.children?[...i.children]:[];for(;p.length>0;){const h=p.pop();h.id=V(),((m=h.children)==null?void 0:m.length)>0&&p.push(...h.children)}n.setCheckedNode(i),C.push(d.value,"\u590D\u5236\u7EC4\u4EF6")}function S(o,s,e){o=o.filter((m,i)=>e!==i),l("update:schemas",o),e===o.length&&e--,n.setCheckedNode(o[e]),C.push(d.value,"\u5220\u9664\u7EC4\u4EF6")}return(o,s)=>(u(),N(t(J),{modelValue:t(a),"onUpdate:modelValue":s[1]||(s[1]=e=>Q(a)?a.value=e:null),group:c.value==="root"||"edit-draggable","item-key":"id",onStart:s[2]||(s[2]=e=>{b(e.oldIndex),t(n).setDisableHover(!0)}),onEnd:s[3]||(s[3]=e=>H()),onAdd:s[4]||(s[4]=e=>{b(e.newIndex),I()}),ghostClass:"moveing","component-data":{name:"draggable-range"}},{item:_(({element:e,index:m})=>{var i,p,h,F;return[v("div",{class:T(["item",{checked:((i=t(n).state.checkedNode)==null?void 0:i.id)===e.id,hover:((p=t(n).state.hoverNode)==null?void 0:p.id)===e.id,"root-node":e.id==="root"}]),onClick:k(g=>t(n).setCheckedNode(e),["stop"]),onMouseover:k(g=>t(n).setHoverNode(e),["stop"]),onMouseout:s[0]||(s[0]=k(g=>t(n).setHoverNode(null),["stop"]))},[G(v("div",X,[v("div",ee,L((h=t(Z).getComponentConfingByType(e.type))==null?void 0:h.defaultSchema.label),1),c.value!=="root"?(u(),y("div",{key:0,title:"\u590D\u5236",class:"action-item",onClick:k(g=>K(t(a),e,m),["stop"])},se,8,te)):x("",!0),c.value!=="root"?(u(),y("div",{key:1,title:"\u5220\u9664",class:"action-item",onClick:k(g=>S(t(a),e,m),["stop"])},le,8,ne)):x("",!0)],512),[[P,((F=t(n).state.checkedNode)==null?void 0:F.id)===e.id]]),D(A,{element:e},null,8,["element"])],42,W)]}),_:1},8,["modelValue","group"]))}}),A=w({__name:"KNodeItem",props:{element:{type:Object,required:!0}},setup(f){const l=f,r=l.element;return U(()=>{console.log("\u66F4\u65B0\u4E8622")}),(n,d)=>{const c=j("KNodeItem",!0);return["row","tabs"].includes(l.element.type)?(u(),N(t(B),{key:0,record:l.element},{"edit-node":_(()=>[(u(!0),y(q,null,z(t(r).children,a=>(u(),N(c,{key:a.id,element:a},null,8,["element"]))),128))]),_:1},8,["record"])):(u(),N(t(B),{key:1,record:l.element},{"edit-node":_(()=>[D(ie,{schemas:t(r).children,"onUpdate:schemas":d[0]||(d[0]=a=>t(r).children=a)},null,8,["schemas"])]),_:1},8,["record"]))}}}),de={class:"k-edit-container"},ue={class:"k-edit-range rounded-md"},he=w({__name:"KEditContainer",setup(f){const l=E("schemas"),r=M(()=>l.value[0]);return(n,d)=>(u(),y("section",de,[v("div",ue,[D(A,{element:t(r)},null,8,["element"])])]))}});export{he as default};
