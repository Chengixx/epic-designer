import{bw as B}from"../guide_components_e-designer.md.ee402248.js";import{h as v,A as l,s as j,X as x,a5 as z,o as t,c as d,a as N,y as C,M as g,l as P,u as V,U as S,a1 as T,j as E,z as A,p as i,r as M}from"../app.c181f4ec.js";const $={class:"epic-tree-node"},q=N("span",{class:"iconfont icon-zhankai"},null,-1),w=[q],F=v({name:"ETreeNode",__name:"treeNode",props:{record:{type:Object,required:!0}},setup(f){const e=f,o=l("slots",{}),s=l("expandedKeys"),_=l("treeProps"),p=l("selectedKeys"),m=l("handleSelect"),c=j(()=>{var r;return s.value.includes((r=e.record.id)!=null?r:"")}),u=v({setup(){return()=>{var r,n;return x("span",{class:{text:!0,hover:_.hoverKey===e.record.id,checked:p.value.includes(e.record.id)},onClick:()=>m(e.record.id,e.record)},(n=(r=o["tree-node"])==null?void 0:r.call(o,e))!=null?n:x("span",{class:"text-padding"},{default:()=>{var y,a;return[(a=e.record.label)!=null?a:(y=B.getComponentConfingByType(e.record.type))==null?void 0:y.defaultSchema.label,x("span",{class:"epic-node-type-text"},e.record.type)]}}))}}});function h(){const r=e.record.id;if(!r)return!1;s.value.includes(r)?s.value=s.value.filter(n=>n!==r):s.value.push(r)}function b(){var n;const r=e.record.id;if(!r||!((n=e.record.children)!=null&&n.length))return!1;s.value.push(r)}return b(),(r,n)=>{var a,k;const y=z("ETreeNode");return t(),d("li",$,[N("a",null,[(a=e.record.children)!=null&&a.length?(t(),d("span",{key:0,class:C(["icon-expanded",{expanded:c.value}]),onClick:h},w,2)):g("",!0),P(V(u))]),(k=e.record.children)!=null&&k.length?(t(),d("ul",{key:0,class:C(["epic-tree-sublist",{expanded:c.value}])},[(t(!0),d(S,null,T(e.record.children,K=>(t(),E(y,{key:K.id,record:K},null,8,["record"]))),128))],2)):g("",!0)])}}}),L={class:"epic-tree-main"},X=v({name:"ETree",__name:"tree",props:{options:{type:Array,default:()=>[]},hoverKey:{type:String,default:""}},emits:["node-click"],setup(f,{emit:e}){const o=f,s=A();i("slots",s);const _=M([]),p=defineModel("selectedKeys");function m(c,u){p.value=[c],e("node-click",{id:c,record:u})}return i("expandedKeys",_),i("selectedKeys",p),i("treeProps",o),i("handleSelect",m),(c,u)=>(t(),d("ul",L,[(t(!0),d(S,null,T(o.options,h=>(t(),E(F,{key:h.id,record:h},null,8,["record"]))),128))]))}});export{X as _};
