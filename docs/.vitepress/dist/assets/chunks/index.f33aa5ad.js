import{bw as k,bD as F}from"../guide_components_e-designer.md.ee402248.js";import{_ as V}from"./node.vue_vue_type_script_setup_true_lang.778c5354.js";import{h as w,A as P,s as q,o as a,c as r,U as m,a1 as y,a as i,V as E,l as _,u as C,M as x,r as B,w as D,k as U,b as O,j as $}from"../app.c181f4ec.js";const j={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},I={key:0,class:"flex m-t-2 first:m-0"},M={class:"attr-label",title:"\u6821\u9A8C\u65F6\u673A"},N={class:"attr-input"},S=i("span",{class:"iconfont icon-shanchu1"},null,-1),R=[S],T=w({__name:"ERuleItem",emits:["change","delete"],setup(A,{emit:d}){const t=defineModel("rule",{required:!0}),v=P("pageManager",{}),o=q(()=>Object.entries(v.funcs.value).filter(([e,s])=>typeof s=="function").map(([e])=>({label:e,value:e}))),h=["string","number","url","array","email"],b=[{label:"change",value:"change"},{label:"blur",value:"blur"}],u=[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"},{label:"any",value:"any"}],g=[{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",componentProps:{options:b,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"switch",label:"\u81EA\u5B9A\u4E49\u89C4\u5219",model:"isValidator"},{type:"select",label:"\u6821\u9A8C\u51FD\u6570",model:"validator",show(){return Boolean(t.value.isValidator)},componentProps:{options:o.value,placeholder:"\u6821\u9A8C\u51FD\u6570"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!t.value.isValidator},componentProps:{options:u,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6B63\u5219\u6821\u9A8C",model:"pattern",show(){return!t.value.isValidator},componentProps:{placeholder:"\u6B63\u5219\u6821\u9A8C"}},{type:"number",label:"\u5B57\u6BB5\u957F\u5EA6",model:"len",show(){var e;return h.includes((e=t.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u5B57\u6BB5\u957F\u5EA6"}},{type:"number",label:"\u6700\u5C0F\u957F\u5EA6",model:"min",show(){var e;return h.includes((e=t.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5C0F\u957F\u5EA6"}},{type:"number",label:"\u6700\u5927\u957F\u5EA6",model:"max",show(){var e;return h.includes((e=t.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5927\u957F\u5EA6"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}];function p(){const e=t.value;e.isValidator?(delete e.type,delete e.pattern,delete e.len,delete e.min,delete e.max):delete e.validator,d("change",e)}function f(){d("delete")}return(e,s)=>(a(),r("div",j,[(a(),r(m,null,y(g,(l,n)=>(a(),r(m,{key:n},[!l.show||l.show()?(a(),r("div",I,[i("div",M,E(l.label),1),i("div",N,[_(C(V),{modelValue:t.value[l.model],"onUpdate:modelValue":c=>t.value[l.model]=c,record:{...l,noFormItem:!0},onChange:p},null,8,["modelValue","onUpdate:modelValue","record"])])])):x("",!0)],64))),64)),i("div",{class:"rule-btn-delete absolute top-0 right-0 transition-all w-6 h-6 cursor-pointer rounded-bl-1 flex-center color-white",onClick:f},R)]))}}),L={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},z={key:0,class:"flex m-t-2 first:m-0"},G={class:"attr-label"},H={class:"flex-1"},W=w({__name:"index",props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup(A,{emit:d}){const t=A,v=k.getComponent("button"),o=B({required:!1,message:"\u5FC5\u586B\u9879",trigger:["change"]}),b=[{type:"switch",label:"\u5FC5\u586B\u9879",model:"required"},{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",show(){return Boolean(o.value.required)},componentProps:{options:[{label:"change",value:"change"},{label:"blur",value:"blur"}],placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",show(){return Boolean(o.value.required)},componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}],u=B([]);D(()=>t.modelValue,e=>{if(e){if(!e)return;u.value=[],e.forEach(s=>{typeof s.required<"u"?o.value=s:u.value.push(s)})}},{immediate:!0});function g(){u.value.push({message:"",trigger:["change"]}),p()}function p(){if(o.value.required){d("update:modelValue",F([...u.value,o.value]));return}if(u.value.length){d("update:modelValue",F(u.value));return}d("update:modelValue",void 0)}function f(e){u.value.splice(e,1),p()}return(e,s)=>(a(),r("div",null,[i("div",L,[(a(),r(m,null,y(b,(l,n)=>(a(),r(m,{key:n},[!l.show||l.show()?(a(),r("div",z,[i("div",G,E(l.label),1),i("div",H,[_(C(V),{modelValue:o.value[l.model],"onUpdate:modelValue":c=>o.value[l.model]=c,record:{...l,noFormItem:!0},onChange:p},null,8,["modelValue","onUpdate:modelValue","record"])])])):x("",!0)],64))),64))]),(a(!0),r(m,null,y(u.value,(l,n)=>(a(),$(T,{key:n,rule:u.value[n],"onUpdate:rule":c=>u.value[n]=c,onDelete:c=>f(n),onChange:p},null,8,["rule","onUpdate:rule","onDelete"]))),128)),_(C(v),{class:"m-t-2",onClick:g},{default:U(()=>[O(" \u6DFB\u52A0\u89C4\u5219 ")]),_:1})]))}});export{W as default};
