import{al as C}from"./index.0d7c8eb8.js";import{e as x,r as u,k,h as w,p as D,l as _,f as c,o as i,c as f,d as N,s as j,g as m,N as $,Y as q,m as B,u as L,G as O}from"../app.c22c6c8c.js";const P={key:0,class:"form-main",style:{height:"100%"}},F=x({__name:"form",props:{record:{type:Object,require:!0,default:()=>({})}},setup(p,{expose:v}){const o=p,a=u(null),s=k("forms",{}),h=u(!0),l=w({});D("formData",l);function n(){return l}function d(e){Object.assign(l,e)}function y(){var e;return(e=a.value)==null?void 0:e.validate()}_(async()=>{var t;var e;if(((e=o.record)==null?void 0:e.type)==="form"&&s.value&&a.value){const r=(t=o.record.name)!=null?t:"default";return s.value[r]=a.value,a.value.getData=n,a.value.setData=d,!1}});const g=c(()=>{const e=o.record.componentProps;let t=e.labelCol,r=e.wrapperCol;return e.labelLayout==="fixed"&&(t={style:`width:${e.labelWidth}px`},r={style:"width:auto;flex:1"}),{...e,labelCol:t,wrapperCol:r}}),b=c(()=>{var e;return(e=o.record.children)!=null?e:[]});return v({form:a,getData:n,setData:d,validate:y}),(e,t)=>h.value?(i(),f("div",P,[N(L(C),B({ref_key:"form",ref:a,model:l},g.value,{style:{height:"100%"}}),{default:j(()=>[m(e.$slots,"edit-node",{},()=>[(i(!0),f($,null,q(b.value,r=>m(e.$slots,"node",{record:r})),256))])]),_:3},16,["model"])])):O("",!0)}});export{F as default};
