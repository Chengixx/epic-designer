import{e as U,j as C,r as V,f as y,o as d,c as p,b as o,d as c,q as w,u as r,M as z,Y as R,P as _,m as j,D as E,E as P,n as Y}from"../app.27d58f12.js";import{R as $}from"./vuedraggable.umd-6a5b6da9.37fa0675.js";import{F as B,V as q,o as G,b as H,z as I,L as J}from"./index-980e4b1c.94133bb0.js";import{p as D}from"./icon.vue_vue_type_script_setup_true_lang-cc078b52.f6aad2d9.js";import"./commonjsHelpers-c5d32002.490f5bf3.js";const K={class:"epic-component-view flex flex-col"},M={class:"search-box px-10px py-6px"},O={class:"flex flex-1 overflow-auto"},Q={class:"tabs-box"},W=["title","onClick"],X={class:"h-full flex-1 overflow-auto py-2 box-border"},A=["onClick"],T={class:"text-center pt-42px text-gray-400"},se=U({__name:"index",setup(Z){const F=B.getComponent("input"),m=C("pageSchema"),v=C("designer"),f=B.getSchemaByGroup(),s=V(""),h={title:"\u5168\u90E8",list:[]},i=V(h),L=y(()=>[h,...f.value]),u=y(()=>{let a=i.value.list;if(i.value.title==="\u5168\u90E8"){const l=f.value.map(e=>e.list);a=[].concat(...l)}return s.value?a.filter(l=>{var e;return(e=l.label)==null?void 0:e.includes(s.value)}):a});function N(a){i.value=a}function x(a){const[l]=q([G(a)],e=>{const t={...e,id:J()};return t.field&&(t.field+=`_${t.id}`),t});return l}function S(a){var k;var l;const e=H(m.schemas,(k=(l=v.state.checkedNode)==null?void 0:l.id)!=null?k:"root");if(!e)return!1;let{list:t,schema:n,index:g}=e;n.children&&!["row","tabs"].includes(n.type)&&(t=n.children,g=n.children.length-1);const b=x(a);t.splice(g+1,0,b),v.setCheckedNode(b),I.push(m.schemas,"\u63D2\u5165\u7EC4\u4EF6")}return(a,l)=>(d(),p("div",K,[o("div",M,[c(r(F),{placeholder:"\u641C\u7D22\u7EC4\u4EF6",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),value:s.value,"onUpdate:value":l[1]||(l[1]=e=>s.value=e)},{prefix:w(()=>[c(r(D),{name:"icon-chaxun"})]),_:1},8,["modelValue","value"])]),o("div",O,[o("div",Q,[(d(!0),p(z,null,R(L.value,(e,t)=>(d(),p("div",{class:Y(["tab cursor-pointer truncate",{checked:i.value.title===e.title}]),key:t,title:e.title,onClick:n=>N(e)},_(e.title),11,W))),128))]),o("div",X,[c(r($),j({modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e)},{group:{name:"edit-draggable",pull:"clone",put:!1},sort:!1,animation:180,ghostClass:"moving"},{clone:x,"item-key":"id",class:"grid grid-cols-[auto_auto] px-10px gap-2"}),{item:w(({element:e})=>[o("div",{class:"source-componet-item flex items-center truncate",onClick:t=>S(e)},[c(r(D),{name:e.icon},null,8,["name"]),o("div",null,_(e.label),1)],8,A)]),_:1},16,["modelValue"]),E(o("div",T,"\u6CA1\u6709\u67E5\u8BE2\u5230\u7684\u7EC4\u4EF6",512),[[P,!u.value.length]])])])]))}});export{se as default};
