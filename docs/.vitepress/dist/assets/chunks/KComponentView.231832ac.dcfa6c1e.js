import{A as _}from"./vuedraggable.umd.5428b8f7.033cc715.js";import{A as d,f as h,M as g,D as b,T as D}from"../guide_components_k-designer.md.863ef670.js";import{f as I,r as C,s as V,o as c,c as k,j as y,i as m,F as K,l as A,u,h as F,y as M,a as x,G as j,b as G,D as L,H as E}from"../app.b39b64a1.js";import"./commonjsHelpers.da91e947.2c5a3ee2.js";const P={class:"k-component-view"},S=["onClick"],R=I({__name:"KComponentView",setup(T){const N=d.getComponent("Collapse"),w=d.getComponent("CollapseItem"),s=C([]);s.value=d.getSchemaByGroup();const r=V("schemas"),p=V("designer"),o=C(s.value.map(l=>l.title));function B(l,t){t[l.oldIndex]=h({...E(t[l.oldIndex]),id:g()})}function U(l){var t,e;const a=b(r.value,(e=(t=p.state.checkedNode)==null?void 0:t.id)!=null?e:"root");if(!a)return!1;let{list:i,schema:n,index:v}=a;n.children&&!["row","tabs"].includes(n.type)&&(i=n.children,v=n.children.length-1);const f=h({...E(l),id:g()});i.splice(v+1,0,f),p.setCheckedNode(f),D.push(r.value,"\u63D2\u5165\u7EC4\u4EF6")}return(l,t)=>(c(),k("div",P,[y(u(N),{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),activeKey:o.value,"onUpdate:activeKey":t[1]||(t[1]=e=>o.value=e)},{default:m(()=>[(c(!0),k(K,null,A(s.value,e=>(c(),F(u(w),{title:e.title,header:e.title,name:e.title,key:e.title},{default:m(()=>[y(u(_),M({modelValue:e.list,"onUpdate:modelValue":a=>e.list=a},{group:{name:"edit-draggable",pull:"clone",put:!1},sort:!1,animation:180,ghostClass:"moving"},{"item-key":"id","component-data":{name:"list"},onEnd:a=>B(a,e.list)}),{item:m(({element:a})=>[x("div",{class:"source-componet-item",onClick:i=>U(a)},[x("span",{class:j(["iconfont",a.icon])},null,2),G(" "+L(a.label),1)],8,S)]),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])]),_:2},1032,["title","header","name"]))),128))]),_:1},8,["modelValue","activeKey"])]))}});export{R as default};
