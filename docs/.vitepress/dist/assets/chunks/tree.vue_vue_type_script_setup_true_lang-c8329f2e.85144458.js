import{e as b,i as A,p,r as B,f as E,o as s,c as d,b as h,d as x,q as D,u as k,M as T,Y as w,v as j,D as M,E as P,j as v,R as V,V as U,n as F,F as _}from"../app.27d58f12.js";import{p as q}from"./icon.vue_vue_type_script_setup_true_lang-cc078b52.f6aad2d9.js";import{F as z}from"./index-980e4b1c.94133bb0.js";const G={class:"epic-tree-node"},H=b({name:"ETreeNode",__name:"treeNode",props:{record:{}},setup(g){const r=g,c=v("slots",{}),n=v("expandedKeys"),C=v("treeProps"),o=v("selectedKeys"),K=v("handleSelect"),u=E(()=>{var e;return n.value.includes((e=r.record.id)!=null?e:"")}),m=b({setup(){return()=>{var l;var e;return V("span",{class:{text:!0,hover:C.hoverKey===r.record.id,checked:o.value.includes(r.record.id)},onClick:()=>K(r.record.id,r.record)},(l=(e=c["tree-node"])==null?void 0:e.call(c,r))!=null?l:V("span",{class:"text-padding"},{default:()=>{var a;var t;return[(a=r.record.label)!=null?a:(t=z.getComponentConfingByType(r.record.type))==null?void 0:t.defaultSchema.label,V("span",{class:"epic-node-type-text"},r.record.type)]}}))}}});function y(){const e=r.record.id;if(!e)return!1;n.value.includes(e)?n.value=n.value.filter(l=>l!==e):n.value.push(e)}function S(){var e;const l=r.record.id;if(!l||!((e=r.record.children)!=null&&e.length))return!1;n.value.push(l)}return S(),(e,l)=>{var t,a;const f=U("ETreeNode");return s(),d("li",G,[h("a",null,[(t=r.record.children)!=null&&t.length?(s(),d("span",{key:0,class:F(["icon-expanded",{expanded:u.value}]),onClick:y},[x(k(q),{name:"icon-zhankai"})],2)):_("",!0),x(k(m))]),(a=r.record.children)!=null&&a.length?(s(),d("ul",{key:0,class:F(["epic-tree-sublist",{expanded:u.value}])},[(s(!0),d(T,null,w(r.record.children,i=>(s(),j(f,{key:i.id,record:i},null,8,["record"]))),128))],2)):_("",!0)])}}}),J={class:"epic-tree"},L={class:"search-box px-10px py-6px"},R={class:"epic-tree-main"},W={class:"text-center pt-42px text-gray-400"},Q=b({name:"ETree",__name:"tree",props:{options:{type:Array,default:()=>[]},hoverKey:{type:String,default:""},selectedKeys:{type:Array,default:()=>[]}},emits:["update:selectedKeys","node-click"],setup(g,{emit:r}){const c=g,n=A();p("slots",n);const C=z.getComponent("input"),o=B(""),K=B([]),u=E({get(){return c.selectedKeys},set(e){r("update:selectedKeys",e)}}),m=E(()=>y(c.options,o.value));function y(e,l){const t=[];return e.forEach(a=>{var f;if((f=a.label)!=null&&f.includes(l))t.push(a);else if(a.children){const i=y(a.children,l);if(i.length>0){const N={...a};N.children=i,t.push(N)}}}),t}function S(e,l){u.value=[e],r("node-click",{id:e,record:l})}return p("expandedKeys",K),p("selectedKeys",u),p("treeProps",c),p("handleSelect",S),(e,l)=>(s(),d("div",J,[h("div",L,[x(k(C),{placeholder:"\u641C\u7D22\u8282\u70B9",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),value:o.value,"onUpdate:value":l[1]||(l[1]=t=>o.value=t)},{prefix:D(()=>[x(k(q),{name:"icon-chaxun"})]),_:1},8,["modelValue","value"])]),h("div",R,[h("ul",null,[(s(!0),d(T,null,w(m.value,t=>(s(),j(H,{class:"level-1",key:t.id,record:t},null,8,["record"]))),128))]),M(h("div",W,"\u6CA1\u6709\u67E5\u8BE2\u5230\u7684\u6570\u636E",512),[[P,!m.value.length]])])]))}});export{Q as W};
