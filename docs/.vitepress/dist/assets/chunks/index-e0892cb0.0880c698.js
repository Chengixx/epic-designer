import{Q as ce,a0 as ke,R as we,a6 as _e,w as W,d as Y,h as V,G as C,I as Se,i as se,g as F,o as L,c as K,a as X,J as k,k as s,t as Me,j as R,n as Z,B as Be,l as G,U as de,Z as Ie,f as x,L as Ee,e as Re,p as xe,z as $e,C as Ae,ab as De,A as Le,W as Fe,ai as Te,O as ze}from"../app.eaa969de.js";import{a9 as Oe,o as te,a7 as fe,ad as le,ac as Pe,bD as Ne,w as q,k as oe,l as J,bE as U,s as Ve,B as pe,C as Ye,aM as ne,at as Xe,a3 as Q,a2 as ae,P as qe,bF as je,t as me,a$ as re,a5 as ve,K as He}from"../guide_components_k-designer.md.c908a8ef.js";import{P as Ke,K as Ue,A as We,L as Ze}from"./index-6a6c1df0.7924fb1f.js";import{S as Ge,l as Je,g as Qe}from"./focus-trap-75c7b2ff.60e695d0.js";import{g as et}from"./use-global-config-fb2065bf.ef8c3a6f.js";const tt=(...e)=>t=>{e.forEach(o=>{ve(o)?o(t):o.value=t})},ot=(e,t,o)=>{let l={offsetX:0,offsetY:0};const n=a=>{const c=a.clientX,m=a.clientY,{offsetX:f,offsetY:p}=l,r=e.value.getBoundingClientRect(),g=r.left,_=r.top,T=r.width,z=r.height,O=document.documentElement.clientWidth,$=document.documentElement.clientHeight,A=-g+f,S=-_+p,M=O-g-T+f,P=$-_-z+p,B=D=>{const u=Math.min(Math.max(f+D.clientX-c,A),M),y=Math.min(Math.max(p+D.clientY-m,S),P);l={offsetX:u,offsetY:y},e.value.style.transform=`translate(${Q(u)}, ${Q(y)})`},v=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",v)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",n)},d=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",n)};ce(()=>{ke(()=>{o.value?i():d()})}),we(()=>{d()})};let st;function lt(e,t=st){t&&t.active&&t.effects.push(e)}const nt=e=>{const t=new Set(e);return t.w=0,t.n=0,t},he=e=>(e.w&w)>0,ye=e=>(e.n&w)>0,at=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=w},rt=e=>{const{deps:t}=e;if(t.length){let o=0;for(let l=0;l<t.length;l++){const n=t[l];he(n)&&!ye(n)?n.delete(e):t[o++]=n,n.w&=~w,n.n&=~w}t.length=o}};let N=0,w=1;const ee=30;let b;class ut{constructor(t,o=null,l){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,lt(this,l)}run(){if(!this.active)return this.fn();let t=b,o=j;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,j=!0,w=1<<++N,N<=ee?at(this):ue(this),this.fn()}finally{N<=ee&&rt(this),w=1<<--N,b=this.parent,j=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(ue(this),this.onStop&&this.onStop(),this.active=!1)}}function ue(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let j=!0;function it(e,t){let o=!1;N<=ee?ye(e)||(e.n|=w,o=!he(e)):o=!e.has(b),o&&(e.add(b),b.deps.push(e))}function ct(e,t){const o=He(e)?e:[...e];for(const l of o)l.computed&&ie(l);for(const l of o)l.computed||ie(l)}function ie(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function H(e){const t=e&&e.__v_raw;return t?H(t):e}function dt(e){j&&b&&(e=H(e),it(e.dep||(e.dep=nt())))}function ft(e,t){e=H(e);const o=e.dep;o&&ct(o)}class pt{constructor(t,o,l,n){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ut(t,()=>{this._dirty||(this._dirty=!0,ft(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=l}get value(){const t=H(this);return dt(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function mt(e,t,o=!1){let l,n;const i=ve(e);return i?(l=e,n=q):(l=e.get,n=e.set),new pt(l,n,i||!n,o)}const vt=(e,t={})=>{_e(e)||Oe("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||te("popup"),l=mt(()=>o.bm("parent","hidden"));if(!fe||le(document.body,l.value))return;let n=0,i=!1,d="0";const a=()=>{setTimeout(()=>{je(document==null?void 0:document.body,l.value),i&&document&&(document.body.style.width=d)},200)};W(e,c=>{if(!c){a();return}i=!le(document.body,l.value),i&&(d=document.body.style.width),n=Ge(o.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,f=Pe(document.body,"overflowY");n>0&&(m||f==="scroll")&&i&&(document.body.style.width=`calc(100% - ${n}px)`),Ne(document.body,l.value)}),ze(()=>a())},ge=e=>{if(!e)return{onClick:q,onMousedown:q,onMouseup:q};let t=!1,o=!1;return{onClick:l=>{t&&o&&e(l),t=o=!1},onMousedown:l=>{t=l.target===l.currentTarget},onMouseup:l=>{o=l.target===l.currentTarget}}},ht=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:J([String,Array,Object])},zIndex:{type:J([String,Number])}}),yt={click:e=>e instanceof MouseEvent},gt="overlay";var bt=Y({name:"ElOverlay",props:ht,emits:yt,setup(e,{slots:t,emit:o}){const l=te(gt),n=c=>{o("click",c)},{onClick:i,onMousedown:d,onMouseup:a}=ge(e.customMaskEvent?void 0:n);return()=>e.mask?V("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:d,onMouseup:a},[C(t,"default")],U.STYLE|U.CLASS|U.PROPS,["onClick","onMouseup","onMousedown"]):Se("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const Ct=bt,be=Symbol("dialogInjectionKey"),Ce=oe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),kt={close:()=>!0},wt=["aria-label"],_t=["id"],St=Y({name:"ElDialogContent"}),Mt=Y({...St,props:Ce,emits:kt,setup(e){const t=e,{t:o}=Ue(),{Close:l}=Ze,{dialogRef:n,headerRef:i,bodyId:d,ns:a,style:c}=se(be),{focusTrapRef:m}=se(Je),f=tt(m,n),p=F(()=>t.draggable);return ot(n,i,p),(r,g)=>(L(),K("div",{ref:s(f),class:k([s(a).b(),s(a).is("fullscreen",r.fullscreen),s(a).is("draggable",s(p)),s(a).is("align-center",r.alignCenter),{[s(a).m("center")]:r.center},r.customClass]),style:de(s(c)),tabindex:"-1"},[X("header",{ref_key:"headerRef",ref:i,class:k(s(a).e("header"))},[C(r.$slots,"header",{},()=>[X("span",{role:"heading",class:k(s(a).e("title"))},Me(r.title),3)]),r.showClose?(L(),K("button",{key:0,"aria-label":s(o)("el.dialog.close"),class:k(s(a).e("headerbtn")),type:"button",onClick:g[0]||(g[0]=_=>r.$emit("close"))},[V(s(Ve),{class:k(s(a).e("close"))},{default:R(()=>[(L(),Z(Be(r.closeIcon||s(l))))]),_:1},8,["class"])],10,wt)):G("v-if",!0)],2),X("div",{id:s(d),class:k(s(a).e("body"))},[C(r.$slots,"default")],10,_t),r.$slots.footer?(L(),K("footer",{key:0,class:k(s(a).e("footer"))},[C(r.$slots,"footer")],2)):G("v-if",!0)],6))}});var Bt=me(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const It=oe({...Ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:J(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Et={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[pe]:e=>Ye(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Rt=(e,t)=>{const o=Ie().emit,{nextZIndex:l}=We();let n="";const i=ne(),d=ne(),a=x(!1),c=x(!1),m=x(!1),f=x(e.zIndex||l());let p,r;const g=et("namespace",Xe),_=F(()=>{const h={},E=`--${g.value}-dialog`;return e.fullscreen||(e.top&&(h[`${E}-margin-top`]=e.top),e.width&&(h[`${E}-width`]=Q(e.width))),h}),T=F(()=>e.alignCenter?{display:"flex"}:{});function z(){o("opened")}function O(){o("closed"),o(pe,!1),e.destroyOnClose&&(m.value=!1)}function $(){o("close")}function A(){r==null||r(),p==null||p(),e.openDelay&&e.openDelay>0?{stop:p}=re(()=>B(),e.openDelay):B()}function S(){p==null||p(),r==null||r(),e.closeDelay&&e.closeDelay>0?{stop:r}=re(()=>v(),e.closeDelay):v()}function M(){function h(E){E||(c.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(h):S()}function P(){e.closeOnClickModal&&M()}function B(){fe&&(a.value=!0)}function v(){a.value=!1}function D(){o("openAutoFocus")}function u(){o("closeAutoFocus")}function y(h){var E;((E=h.detail)==null?void 0:E.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&vt(a);function I(){e.closeOnPressEscape&&M()}return W(()=>e.modelValue,h=>{h?(c.value=!1,A(),m.value=!0,f.value=e.zIndex?f.value++:l(),Ee(()=>{o("open"),t.value&&(t.value.scrollTop=0)})):a.value&&S()}),W(()=>e.fullscreen,h=>{t.value&&(h?(n=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=n)}),ce(()=>{e.modelValue&&(a.value=!0,m.value=!0,A())}),{afterEnter:z,afterLeave:O,beforeLeave:$,handleClose:M,onModalClick:P,close:S,doClose:v,onOpenAutoFocus:D,onCloseAutoFocus:u,onCloseRequested:I,onFocusoutPrevented:y,titleId:i,bodyId:d,closed:c,style:_,overlayDialogStyle:T,rendered:m,visible:a,zIndex:f}},xt=["aria-label","aria-labelledby","aria-describedby"],$t=Y({name:"ElDialog",inheritAttrs:!1}),At=Y({...$t,props:It,emits:Et,setup(e,{expose:t}){const o=e,l=Re();ae({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!l.title)),ae({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},F(()=>!!o.customClass));const n=te("dialog"),i=x(),d=x(),a=x(),{visible:c,titleId:m,bodyId:f,style:p,overlayDialogStyle:r,rendered:g,zIndex:_,afterEnter:T,afterLeave:z,beforeLeave:O,handleClose:$,onModalClick:A,onOpenAutoFocus:S,onCloseAutoFocus:M,onCloseRequested:P,onFocusoutPrevented:B}=Rt(o,i);xe(be,{dialogRef:i,headerRef:d,bodyId:f,ns:n,rendered:g,style:p});const v=ge(A),D=F(()=>o.draggable&&!o.fullscreen);return t({visible:c,dialogContentRef:a}),(u,y)=>(L(),Z(Te,{to:"body",disabled:!u.appendToBody},[V(Fe,{name:"dialog-fade",onAfterEnter:s(T),onAfterLeave:s(z),onBeforeLeave:s(O),persisted:""},{default:R(()=>[$e(V(s(Ct),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":s(_)},{default:R(()=>[X("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:s(m),"aria-describedby":s(f),class:k(`${s(n).namespace.value}-overlay-dialog`),style:de(s(r)),onClick:y[0]||(y[0]=(...I)=>s(v).onClick&&s(v).onClick(...I)),onMousedown:y[1]||(y[1]=(...I)=>s(v).onMousedown&&s(v).onMousedown(...I)),onMouseup:y[2]||(y[2]=(...I)=>s(v).onMouseup&&s(v).onMouseup(...I))},[V(s(Qe),{loop:"",trapped:s(c),"focus-start-el":"container",onFocusAfterTrapped:s(S),onFocusAfterReleased:s(M),onFocusoutPrevented:s(B),onReleaseRequested:s(P)},{default:R(()=>[s(g)?(L(),Z(Bt,Ae({key:0,ref_key:"dialogContentRef",ref:a},u.$attrs,{"custom-class":u.customClass,center:u.center,"align-center":u.alignCenter,"close-icon":u.closeIcon,draggable:s(D),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:s($)}),De({header:R(()=>[u.$slots.title?C(u.$slots,"title",{key:1}):C(u.$slots,"header",{key:0,close:s($),titleId:s(m),titleClass:s(n).e("title")})]),default:R(()=>[C(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:R(()=>[C(u.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,xt)]),_:3},8,["mask","overlay-class","z-index"]),[[Le,s(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Dt=me(At,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Pt=qe(Dt);export{It as B,yt as C,Et as I,Rt as L,Pt as X,be as a,ht as b,vt as g,ge as k,ot as r,Ct as w};
