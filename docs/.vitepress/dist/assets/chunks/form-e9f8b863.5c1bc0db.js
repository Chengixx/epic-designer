import{al as C}from"./index-3519e374.9c71cf1c.js";import{e as x,r as u,j as k,h as w,p as D,k as _,f as c,o as i,c as f,d as j,q,g as m,M as B,Z as N,m as $,u as F,F as L}from"../app.9ec52d9f.js";const M={key:0,class:"form-main",style:{height:"100%"}},V=x({__name:"form",props:{record:{type:Object,require:!0,default:()=>({})}},setup(p,{expose:v}){const o=p,a=u(null),s=k("forms",{}),h=u(!0),l=w({});D("formData",l);function n(){return l}function d(e){Object.assign(l,e)}function y(){var e;return(e=a.value)==null?void 0:e.validate()}_(async()=>{var t;var e;if(((e=o.record)==null?void 0:e.type)==="form"&&s.value&&a.value){const r=(t=o.record.name)!=null?t:"default";return s.value[r]=a.value,a.value.getData=n,a.value.setData=d,!1}});const g=c(()=>{const e=o.record.componentProps;let t=e.labelCol,r=e.wrapperCol;return e.labelLayout==="fixed"&&(t={style:`width:${e.labelWidth}px`},r={style:"width:auto;flex:1"}),{...e,labelCol:t,wrapperCol:r}}),b=c(()=>{var e;return(e=o.record.children)!=null?e:[]});return v({form:a,getData:n,setData:d,validate:y}),(e,t)=>h.value?(i(),f("div",M,[j(F(C),$({ref_key:"form",ref:a,model:l},g.value,{style:{height:"100%"}}),{default:q(()=>[m(e.$slots,"edit-node",{},()=>[(i(!0),f(B,null,N(b.value,r=>m(e.$slots,"node",{record:r})),256))])]),_:3},16,["model"])])):L("",!0)}});export{V as default};
