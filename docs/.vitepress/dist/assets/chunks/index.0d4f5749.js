import{r as T,g as C,h as Ye,i as ye,j as he,k as ae,l as Ue,p as Z,s as Me,m as le,w as z,n as Ze,q as qe,o as X,t as ne,v as F,x as Ie,y as be,e as te,z as xe,A as Ae,B as W,u as Y,C as je,D as Qe,d as ue,c as Xe,E as Ke,F as et,S as Fe,G as tt,H as $e,I as Pe,J as nt,K as ot,L as rt,M as He,b as it}from"../app.b200646e.js";var st=Object.defineProperty,at=(e,n,t)=>n in e?st(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Q=(e,n,t)=>(at(e,typeof n!="symbol"?n+"":n,t),t);const U=(e,n)=>Ye({loader:e,loadingComponent:n,delay:80});function Ee(e=10){return Math.random().toString(36).substring(2,2+e)}function ut(e){return e.charAt(0).toUpperCase()+e.slice(1)}function re(e,n=new WeakMap){if(typeof e!="object"||e===null)return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const o=e.map(r=>re(r,n));return n.set(e,o),o}const t={};return n.set(e,t),Object.keys(e).forEach(o=>{t[o]=re(e[o],n)}),t}function Bt(e){const[n]=dt([re(e)],t=>{const o={...t,id:`${t.type}_${Ee(8)}`};return(o.field||o.input)&&(o.field=o.id),o});return n}function me(e,n){for(const[t,o]of Object.entries(n)){const r=e==null?void 0:e[t];r&&o&&typeof r=="object"&&typeof o=="object"?me(r,o):e[t]=o}Object.keys(e).reverse().forEach(t=>{n.hasOwnProperty(t)||(Array.isArray(n)?e.splice(t,1):delete e[t])})}function lt(e,n,t=new WeakMap){const o=r=>{if(Array.isArray(r))return r.map(o);if(typeof r=="object"&&r!==null){if(t.has(r))return"[Circular]";t.set(r,!0);const u=Object.keys(r).sort(),s={};return u.forEach(i=>{s[i]=o(r[i])}),t.delete(r),s}else return r};return JSON.stringify(o(e))===JSON.stringify(o(n))}function ct(e,n){const t=[];let o=!1;function r(u){if(t.push(u),u.id===n&&(o=!0),!o&&u.children!=null&&u.children.length>0)for(let s=0;s<u.children.length&&(r(u.children[s]),!o);s++);if(!o&&u.slots)for(let s in u.slots)for(let i=0;i<u.slots[s].length&&(r(u.slots[s][i]),!o);i++);o||t.pop()}return e.forEach(r),o||console.error(`\u6CA1\u6709\u67E5\u8BE2\u5230id\u4E3A${n}\u7684\u8282\u70B9`),t}function Jt(e,n){const t=e.split(".");let o=n;for(let r=0;r<t.length;r++)if(o=o[t[r]],typeof o>"u")return;return o}function Wt(e,n,t){const o=n.split(".");let r=t;o.forEach((u,s)=>{var i;if(s===o.length-1){r[u]=e;return}r=(i=r[u])!=null?i:r[u]={}})}function Ge(e,n,t=!1,o){const r=[],u=[...e];for(;u.length;){const s=u.pop();if(s!=null&&s.children&&(!o||o(s))&&u.push(...s.children),s!=null&&s.slots&&(!o||o(s)))for(let i in s.slots)u.push(...s.slots[i]);if(n(s)&&(r.push(s),t))return s}return t?!1:r}function dt(e,n,t){const o=[...e];for(;o.length;){const r=o.pop();if(r!=null&&r.children&&(!t||t(r))&&o.push(...r.children),r!=null&&r.slots&&(!t||t(r)))for(let u in r.slots)o.push(...r.slots[u]);me(r,n(r))}return e}function Yt(e,n){const t=Ge(e,o=>o.id===n,!0);if(!t)throw new Error(`\u6CA1\u6709\u67E5\u8BE2\u5230id\u4E3A${n}\u7684\u8282\u70B9`);return t}function Ut(e,n){const t=[{type:"",children:e}];let o=0,r=null;if(Ge(t,u=>{var s;if(r=(s=u.children)!=null?s:null,!r){if(u!=null&&u.slots)for(let i in u.slots){r=u.slots[i];for(let c=0;c<r.length;c++)if(r[c].id===n)return o=c,!0}return!1}for(let i=0;i<r.length;i++)if(r[i].id===n)return o=i,!0;return!1},!0),!r)throw new Error(`\u6CA1\u6709\u67E5\u8BE2\u5230id\u4E3A${n}\u7684\u8282\u70B9`);return{list:r,schema:r[o],index:o}}function Zt(e){const n={schemas:[{type:"page",id:"root",label:"\u9875\u9762",children:[{label:"\u8868\u5355",type:"form",icon:"epic-icon-daibanshixiang",labelWidth:e.config.labelWidth||100,name:"default",componentProps:{layout:e.config.layout||"horizontal",labelWidth:e.config.labelWidth||100,labelLayout:e.config.labelLayout==="flex"?"fixed":"flex",labelCol:e.config.labelCol||{span:5},wrapperCol:e.config.wrapperCol||{span:19},hideRequiredMark:e.config.hideRequiredMark||!1,colon:e.config.colon||!0,labelAlign:e.config.labelAlign||"right",size:e.config.size||"middle"},children:[],id:"form_"+Ee()}],componentProps:{style:{padding:"16px"}}}],script:e.script||""};return n.schemas[0].children[0].children=fe(e.list),n}function fe(e,n){return e.map(t=>{var g,b;var o,r,u;let s=(g=t.type)!=null?g:"";const i=(b=t.options)!=null?b:{},c=(v,w)=>{s===v&&(s=w,i.defaultValue&&(i.defaultValue=JSON.parse(i.defaultValue)))};if(c("uploadImg","upload-image"),c("uploadFile","upload-file"),s==="date"&&i.range&&(i.type="daterange",delete i.range),(s==="date"||s==="time")&&(i.valueFormat=i.format),s==="textarea"){const{minRows:v,maxRows:w}=i;i.autoSize={minRows:v,maxRows:w},delete i.minRows,delete i.maxRows}s==="number"&&!i.precision&&delete i.precision,i.width&&(i.style={width:i.width},delete i.width),s==="grid"&&(s="row",t.childImmovable=!0),n&&n.type==="grid"&&(s="col",i.span=t.span,t.key=Ee());const m={label:t.label,type:s,icon:t.icon||"",field:t.model,componentProps:i,childImmovable:t.childImmovable,id:t.key};return(i.noFormItem||!i.showLabel)&&(m.noFormItem=!0,delete i.noFormItem,delete i.showLabel),i.clearable&&(i.allowClear=!0,delete i.clearable),["input","textarea","number","password","select","cascader","checkbox","radio","date","time","slider","switch","color-picker","upload-file","upload-image"].includes(s)&&(m.input=!0,((r=(o=t.rules)==null?void 0:o[0])==null?void 0:r.required)===!1&&t.rules.shift(),((u=t.rules)==null?void 0:u.length)>0&&(m.rules=t.rules)),t.list&&(m.children=fe(t.list,t)),t.columns&&(m.children=fe(t.columns,t)),t.trs&&(m.children=fe(t.trs,t)),t.tds&&(m.children=fe(t.tds,t)),m})}function Oe(e){return ot()?(rt(e),!0):!1}function pt(e){let n=0,t,o;const r=()=>{n-=1,o&&n<=0&&(o.stop(),t=void 0,o=void 0)};return(...u)=>(n+=1,t||(o=nt(!0),t=o.run(()=>e(...u))),Oe(r),t)}function Ce(e){return typeof e=="function"?e():Y(e)}const ft=typeof window<"u",ht=()=>{};function qt(e,n,t){const o=z(e,(...r)=>($e(()=>o()),n(...r)),t)}function ce(e){var n;const t=Ce(e);return(n=t==null?void 0:t.$el)!=null?n:t}const ge=ft?window:void 0;function mt(...e){let n,t,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,r]=e,n=ge):[n,t,o,r]=e,!n)return ht;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const u=[],s=()=>{u.forEach(g=>g()),u.length=0},i=(g,b,v,w)=>(g.addEventListener(b,v,w),()=>g.removeEventListener(b,v,w)),c=z(()=>[ce(n),Ce(r)],([g,b])=>{s(),g&&u.push(...t.flatMap(v=>o.map(w=>i(g,v,w,b))))},{immediate:!0,flush:"post"}),m=()=>{c(),s()};return Oe(m),m}var vt=Object.defineProperty,yt=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?vt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ze=(e,n)=>{for(var t in n||(n={}))bt.call(n,t)&&Re(e,t,n[t]);if(Te)for(var t of Te(n))_t.call(n,t)&&Re(e,t,n[t]);return e},Be=(e,n)=>yt(e,gt(n));function wt(e){return typeof e=="function"?e:typeof e=="string"?n=>n.key===e:Array.isArray(e)?n=>e.includes(n.key):()=>!0}function Je(...e){let n,t,o={};e.length===3?(n=e[0],t=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(n=!0,t=e[0],o=e[1]):(n=e[0],t=e[1]):(n=!0,t=e[0]);const{target:r=ge,eventName:u="keydown",passive:s=!1,dedupe:i=!1}=o,c=wt(n);return mt(r,u,m=>{m.repeat&&Ce(i)||c(m)&&t(m)},s)}function _e(e,n,t={}){return Je(e,n,Be(ze({},t),{eventName:"keydown"}))}function we(e,n,t={}){return Je(e,n,Be(ze({},t),{eventName:"keyup"}))}function St(){const e=T(!1);return He()&&it(()=>{e.value=!0}),e}function $t(e){const n=St();return le(()=>(n.value,!!e()))}var Ne=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,Ct=(e,n)=>{var t={};for(var o in e)Et.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&Ne)for(var o of Ne(e))n.indexOf(o)<0&&Ot.call(e,o)&&(t[o]=e[o]);return t};function Dt(e,n,t={}){const o=t,{window:r=ge}=o,u=Ct(o,["window"]);let s;const i=$t(()=>r&&"ResizeObserver"in r),c=()=>{s&&(s.disconnect(),s=void 0)},m=le(()=>Array.isArray(e)?e.map(v=>ce(v)):[ce(e)]),g=z(m,v=>{if(c(),i.value&&r){s=new ResizeObserver(n);for(const w of v)w&&s.observe(w,u)}},{immediate:!0,flush:"post",deep:!0}),b=()=>{c(),g()};return Oe(b),{isSupported:i,stop:b}}function Qt(e,n={width:0,height:0},t={}){const{window:o=ge,box:r="content-box"}=t,u=le(()=>{var c,m;return(m=(c=ce(e))==null?void 0:c.namespaceURI)==null?void 0:m.includes("svg")}),s=T(n.width),i=T(n.height);return Dt(e,([c])=>{const m=r==="border-box"?c.borderBoxSize:r==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&u.value){const g=ce(e);if(g){const b=o.getComputedStyle(g);s.value=Number.parseFloat(b.width),i.value=Number.parseFloat(b.height)}}else if(m){const g=Array.isArray(m)?m:[m];s.value=g.reduce((b,{inlineSize:v})=>b+v,0),i.value=g.reduce((b,{blockSize:v})=>b+v,0)}else s.value=c.contentRect.width,i.value=c.contentRect.height},t),z(()=>ce(e),c=>{s.value=c?n.width:0,i.value=c?n.height:0}),{width:s,height:i}}function Mt(){const e=T(1),n=T(!1),{pressSpace:t,pressShift:o,pressCtrl:r}=It();return{canvasScale:e,pressSpace:t,pressShift:o,pressCtrl:r,disabledZoom:n}}const De=pt(Mt);function It(){const e=T(!1),n=T(!1),t=T(!1);return _e(" ",o=>{var r=o.target;["INPUT","TEXTAREA"].includes(r.tagName)||o.preventDefault(),e.value=!0}),we(" ",()=>{e.value=!1}),_e("Shift",o=>{o.preventDefault(),n.value=!0}),we("Shift",()=>{n.value=!1}),_e("Control",o=>{o.preventDefault(),t.value=!0}),we("Control",()=>{t.value=!1}),{pressSpace:e,pressShift:n,pressCtrl:t}}function Xt(e){const{pressSpace:n}=De();let t=0,o=0;function r(i){var c;t=i.x,o=i.y,(c=i.dataTransfer)==null||c.setDragImage(document.createElement("div"),0,0)}function u(i){if(i.preventDefault(),!i.x||!i.y||!n.value)return;const c=i.x-t,m=i.y-o;t=i.x,o=i.y,e.value&&(e.value.scrollTop-=m,e.value.scrollLeft-=c)}function s(){n.value=!1}return{handleElementDragStart:r,handleElementDrag:u,handleElementDragEnd:s}}function Kt(e){const{pressCtrl:n,canvasScale:t,disabledZoom:o}=De();function r(u){if(!n.value||o.value)return;u.preventDefault();let s=0;u.deltaY<0?s=t.value+.05:s=t.value-.05,!(s>150||s<.5)&&(t.value=s)}return z(()=>t.value,u=>{e.value&&!o.value&&(e.value.style.transform=`scale(${u})`)}),{handleZoom:r,canvasScale:t}}function en(e,n=16.66){let t;function o(){r(),t=window.setInterval(e,n)}function r(){window.clearInterval(t)}return{startTimedQuery:o,stopTimedQuery:r}}class xt{constructor(){Q(this,"components",{}),Q(this,"componentConfigs",{}),Q(this,"componentSchemaGroups",T([])),Q(this,"hiddenComponents",[]),Q(this,"componentGroupNameMap",{}),Q(this,"sortedGroups",[]),Q(this,"viewsContainers",{activitybars:[],rightSidebars:[]}),Q(this,"publicMethods",{})}component(n,t){typeof t=="function"&&(t=U(t)),this.components[n]=t}registerComponent(n){this.component(n.defaultSchema.type,n.component),n.defaultSchema.input&&(n.config.action||(n.config.action=[]),n.config.action.unshift({type:"setValue",describe:"\u8BBE\u7F6E\u503C",argsConfigs:[{...n.defaultSchema,label:"\u8BBE\u7F6E\u6570\u636E",field:"0"}]},{type:"getValue",describe:"\u83B7\u53D6\u503C"})),this.componentConfigs[n.defaultSchema.type]=n,this.computedComponentSchemaGroups()}getComponents(){return this.components}getComponent(n){return this.components[n]}registerActivitybar(n){typeof n.component=="function"&&(n.component=U(n.component));const t=this.viewsContainers.activitybars.findIndex(o=>o.id===n.id);t!==-1?this.viewsContainers.activitybars[t]=n:this.viewsContainers.activitybars.push(n)}getActivitybars(){return this.viewsContainers.activitybars}registerRightSidebar(n){typeof n.component=="function"&&(n.component=U(n.component));const t=this.viewsContainers.rightSidebars.findIndex(o=>o.id===n.id);t!==-1?this.viewsContainers.rightSidebars[t]=n:this.viewsContainers.rightSidebars.push(n)}getRightSidebars(){return this.viewsContainers.rightSidebars}getComponentConfings(){return this.componentConfigs}getComponentConfingByType(n){return this.componentConfigs[n]}computedComponentSchemaGroups(){const n=[];Object.values(this.componentConfigs).forEach(t=>{var o;if(!this.hiddenComponents.includes(t.defaultSchema.type)&&t.groupName){const r=(o=this.componentGroupNameMap[t.groupName])!=null?o:t.groupName;let u=n.findIndex(i=>i.title===r);u===-1&&(n.push({title:r,list:[]}),u=n.length-1);let s=n[u].list.findIndex(i=>i.type===t.defaultSchema.type);s!==-1?n[u].list[s]=t.defaultSchema:n[u].list.push(t.defaultSchema)}}),n.sort((t,o)=>{const r=this.sortedGroups.indexOf(t.title),u=this.sortedGroups.indexOf(o.title);return r===-1?1:u===-1?-1:r-u}),this.componentSchemaGroups.value=n}getComponentSchemaGroups(){return this.componentSchemaGroups}setComponentGroupNameMap(n,t){this.componentGroupNameMap[n]=t}clearComponentGroupNameMap(){this.componentGroupNameMap={}}setSortedGroups(n){this.sortedGroups=n}clearSortedGroups(){this.sortedGroups=[]}hideComponent(n){this.hiddenComponents.push(n),this.computedComponentSchemaGroups()}showComponent(n){this.hiddenComponents=this.hiddenComponents.filter(t=>t!==n),this.computedComponentSchemaGroups()}setHideComponents(n){this.hiddenComponents=n,this.computedComponentSchemaGroups()}addPublicMethod(n){this.publicMethods[n.methodName]=n}removePublicMethod(n){delete this.publicMethods[n]}}const oe=new xt;function We(){const e=T({}),n=T({});function t(c){return e.value[c]}function o(c,m){e.value[c]=m}function r(c){delete e.value[c]}function u(c){const m=Object.entries(oe.publicMethods).reduce((g,[b,v])=>(g[b]=v.method,g),{});new Function(`const epic = this;${c}`).bind({...m,getComponent:t,find:t,defineExpose:s,publicMethods:m})()}function s(c){c!=null&&(n.value=c)}function i(c,...m){c==null||c.forEach(g=>{var b,v,w;if(g.type==="public"&&((b=oe.publicMethods[g.methodName])==null||b.method(g.args)),g.type==="custom"&&((w=(v=n.value)[g.methodName])==null||w.call(v,...m)),g.type==="component"){(g.componentId!=null&&t(g.componentId))[g.methodName](...g.args?JSON.parse(g.args):m);return}})}return{componentInstances:e,funcs:n,getComponentInstance:t,addComponentInstance:o,removeComponentInstance:r,setMethods:u,doActions:i}}function At(){const e=T([]),n=T([]),t=T(null);let o=0;function r(i,c="\u63D2\u5165\u7EC4\u4EF6"){const m=Date.now();o+150>m||(o=m,t.value!=null&&(e.value.push(t.value),n.value.splice(0,n.value.length)),t.value={type:c,componentSchema:JSON.stringify(i)},e.value.length>20&&e.value.unshift())}function u(){if(e.value.length===0)return!1;const i=e.value.pop();return t.value!=null&&n.value.push(t.value),t.value=i,JSON.parse(i.componentSchema)}function s(){if(n.value.length===0)return!1;const i=n.value.pop();return t.value!=null&&e.value.push(t.value),t.value=i,JSON.parse(i.componentSchema)}return{recordList:e,undoList:n,currentRecord:t,push:r,undo:u,redo:s}}const Ve=At(),Pt=ye({name:"ENode",__name:"node",props:{componentSchema:{},modelValue:{},ruleField:{},resetFormData:{},name:{}},emits:["update:modelValue","change"],setup(e,{emit:n}){const t=e,o=he(t.componentSchema);let r=ae("formData",{});const u=ae("slots",{}),s=ae("pageManager",{}),i=ae("disabled",!1),c=ae("ruleFieldPrefix",null),m=ae("resetFormData",!1);(t.resetFormData||m)&&(r={});const g=n,b=oe.getComponent("form-item"),v=T(),w=T(),L=Ue();Object.keys(L).length&&Z("nodeAttrs",L);const H=Me(null),$=Me({}),R=he({}),N=le(()=>{var A;var p,O;return(p=o.componentProps)!=null&&p.hidden?!1:typeof o.show=="boolean"?o.show:(A=(O=o.show)==null?void 0:O.call(o,{values:r}))!=null?A:!0}),I=le(()=>{var p;const O=N.value&&((p=o.rules)==null?void 0:p.map(a=>({...a,validator:a.validator&&s.funcs.value[a.validator]})));let A=o.field;t.ruleField?A=t.ruleField:c&&o.field&&(A=re(c),A.push(o.field));const f={...o,rules:O,rule:O,field:A};return f.children&&delete f.children,f}),V=le(()=>{var p;return(p=oe.getComponentConfingByType(o.type))!=null?p:null}),x=()=>{var p,O;return(O=r[(p=o.field)!=null?p:""])!=null?O:t.modelValue};z(()=>v.value,()=>{k()});function k(){var p;o.id&&v.value&&(o.input&&(v.value.setValue=B,v.value.getValue=()=>r[o.field]||t.modelValue),v.value.setAttr=(O,A)=>o.componentProps[O]=A,v.value.getAttr=O=>o.componentProps[O],s.addComponentInstance(o.id,v.value),(p=V.value)!=null&&p.defaultSchema.input&&o.noFormItem!==!0&&w.value&&s.addComponentInstance(o.id+"formItem",w.value))}function ie(){var p;o.id&&(s.removeComponentInstance(o.id),(p=V.value)!=null&&p.defaultSchema.input&&o.noFormItem!==!0&&s.removeComponentInstance(o.id+"formItem"))}async function S(){var h,d,_;var p,O,A;if(typeof((p=o.componentProps)==null?void 0:p.defaultValue)<"u"){const y=(h=r[o.field])!=null?h:(O=o.componentProps)==null?void 0:O.defaultValue;B(re(y))}if(o.type==="slot"){const y=o.slotName;if(!y)return;H.value=ye({setup(){return()=>W(u,y,{componentSchema:o,model:r})}});return}const f=oe.getComponent(o.type);if(!f){console.error(`\u7EC4\u4EF6${o.type}\u672A\u6CE8\u518C`);return}const a=(d=(A=V.value)==null?void 0:A.bindModel)!=null?d:"modelValue";if(typeof f=="function"){const y=await f();H.value=(_=y.default)!=null?_:y}else H.value=f;const l={};o.on&&Object.keys(o.on).forEach(y=>{l[`on${ut(y)}`]=(...E)=>s.doActions(o.on[y],...E)}),$.value={...t,disabled:i||o.disabled,bindModel:a,[`onUpdate:${a}`]:B,...l}}function B(p){g("update:modelValue",p),g("change",p),o.field&&(r[o.field]=p)}let D=null;return z(()=>o,p=>{const O=JSON.stringify({...p,children:void 0});if(O===D)return!1;D=O,S()},{immediate:!0,deep:!0}),Ze(ie),(p,O)=>{var A;const f=qe("ENode");return o.noFormItem!==!0&&(A=V.value)!=null&&A.defaultSchema.input&&H.value&&N.value?(X(),ne(Y(b),be({key:0,ref_key:"formItemRef",ref:w},I.value),{default:F(()=>[(X(),ne(Ie(H.value),be({ref_key:"componentInstance",ref:v,onVnodeMounted:k},{...$.value,...o.componentProps,...R,[$.value.bindModel]:x()}),{node:F(a=>[te(f,xe(Ae(a)),null,16)]),"edit-node":F(()=>[W(p.$slots,"edit-node")]),_:3},16))]),_:3},16)):H.value&&N.value?(X(),ne(Ie(H.value),be({key:1,onVnodeMounted:k,ref_key:"componentInstance",ref:v,model:Y(r)},{...$.value,...o.componentProps,...R,[$.value.bindModel]:x()}),{node:F(a=>[te(f,xe(Ae(a)),null,16)]),"edit-node":F(()=>[W(p.$slots,"edit-node")]),_:3},16,["model"])):je("",!0)}}}),Tt={class:"epic-builder-main"},Rt={class:"loading-box"},tn=ye({__name:"builder",props:{pageSchema:{}},emits:["ready"],setup(e,{expose:n,emit:t}){const o=U(()=>C(()=>import("./index-ab078c8b.a02f8989.js"),["assets/chunks/index-ab078c8b.a02f8989.js","assets/chunks/plugin-vue_export-helper-dad06003.1d61e2b9.js","assets/app.b200646e.js"])),r=We(),u=t,s=Qe(),i=T({}),c=T(!1),m=e,g=he({schemas:[]});z(()=>m.pageSchema,$=>{me(g,$)},{immediate:!0,deep:!0}),z(()=>g.script,$=>{$&&$!==""&&r.setMethods($)},{immediate:!0}),Z("slots",s),Z("pageManager",r),Z("forms",i),Z("pageSchema",g);function b($="default"){return new Promise(async(R,N)=>{var I;if(!c.value){const k=z(c,()=>{k(),R(b($))});return}const V=(I=i.value)==null?void 0:I[$];if(!V)return N(`\u8868\u5355 [name=${$}] \u4E0D\u5B58\u5728`),!1;const x=re(await V.getData());R(x)})}function v($="default"){return new Promise(async(R,N)=>{var I;if(!c.value){const x=z(c,()=>{x(),R(b($))});return}const V=(I=i.value)==null?void 0:I[$];if(!V)return N(`\u8868\u5355 [name=${$}] \u4E0D\u5B58\u5728`),!1;try{await V.validate();const x=await V.getData();R(x)}catch(x){N(x)}})}function w($,R="default"){var N;if(!c.value){const V=z(c,()=>{V(),w($,R)});return}const I=(N=i.value)==null?void 0:N[R];if(!I)return console.error(`\u8868\u5355 [name=${R}] \u4E0D\u5B58\u5728`),!1;I.setData($)}const{proxy:L}=He();function H(){$e(()=>{c.value=!0,u("ready",r),L&&r.addComponentInstance("builder",L)})}return n({ready:c,getData:b,setData:w,validate:v}),($,R)=>(X(),ne(Fe,{onResolve:H},{default:F(()=>[ue("div",Tt,[(X(!0),Xe(et,null,Ke(g.schemas,(N,I)=>(X(),ne(Y(Pt),{key:I,componentSchema:N},null,8,["componentSchema"]))),128))])]),fallback:F(()=>[ue("div",Rt,[te(Y(o))])]),_:1}))}}),Nt={class:"epic-designer-main"},Vt={class:"epic-header-container"},Lt={class:"loading-box"},Se=`const { defineExpose, find } = epic;

function test (){
    console.log('test')
}

// \u901A\u8FC7defineExpose\u66B4\u9732\u7684\u51FD\u6570\u6216\u8005\u5C5E\u6027
defineExpose({
 test 
})`,nn=ye({__name:"designer",props:{disabledZoom:{type:Boolean,default:!1},hiddenHeader:{type:Boolean,default:!1}},emits:["ready","save"],setup(e,{expose:n,emit:t}){const o=U(()=>C(()=>import("./index-65e41cd4.249b16da.js"),["assets/chunks/index-65e41cd4.249b16da.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/app.b200646e.js"])),r=U(()=>C(()=>import("./index-2b597e63.47a2bec1.js"),["assets/chunks/index-2b597e63.47a2bec1.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/app.b200646e.js"])),u=U(()=>C(()=>import("./index-eea69a30.dacd76ec.js"),["assets/chunks/index-eea69a30.dacd76ec.js","assets/app.b200646e.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/chunks/vuedraggable.umd-95bb1123.93b8ed8d.js"])),s=U(()=>C(()=>import("./index-db998a1e.524e0ec5.js"),["assets/chunks/index-db998a1e.524e0ec5.js","assets/app.b200646e.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js"])),i=U(()=>C(()=>import("./index-ab078c8b.a02f8989.js"),["assets/chunks/index-ab078c8b.a02f8989.js","assets/chunks/plugin-vue_export-helper-dad06003.1d61e2b9.js","assets/app.b200646e.js"])),c=We(),m=e,g=t,b=he({checkedNode:null,hoverNode:null,disableHover:!1,matched:[]}),v=he({schemas:[],script:""}),{disabledZoom:w}=De();z(()=>m.disabledZoom,S=>{w.value=S},{immediate:!0}),z(()=>v.script,S=>{S&&S!==""&&c.setMethods(S)});const L=[{type:"page",id:"root",label:"\u9875\u9762",children:[],componentProps:{style:{padding:"16px"}}}];v.script=Se,Z("pageSchema",v),Z("pageManager",c),Z("designerProps",m),Z("designer",{setCheckedNode:$,setHoverNode:R,setDisableHover:I,reset:k,state:b});function H(){v.schemas=re(L),$(v.schemas[0]),Ve.push(v.schemas,"\u521D\u59CB\u5316\u64A4\u9500\u529F\u80FD")}async function $(S=v.schemas[0]){b.checkedNode=S,b.matched=ct(v.schemas,S.id)}async function R(S=null){var B;if(!S||b.disableHover)return b.hoverNode=null,!1;if((S==null?void 0:S.id)===((B=b.hoverNode)==null?void 0:B.id))return!1;b.hoverNode=S}function N(){$e(()=>{g("ready",{pageManager:c})})}async function I(S=!1){b.disableHover=S}function V(S){me(v,S)}function x(){return Pe(v)}function k(){lt(v.schemas,L)&&v.script===Se||(me(v.schemas,L),v.script=Se,$(v.schemas[0]),Ve.push(v.schemas,"\u91CD\u7F6E\u64CD\u4F5C"))}function ie(){g("save",Pe(v))}return H(),n({setData:V,getData:x,reset:k}),(S,B)=>(X(),ne(Fe,{onResolve:N},{default:F(()=>[ue("div",Nt,[ue("div",Vt,[W(S.$slots,"header",{},()=>[m.hiddenHeader?je("",!0):(X(),ne(Y(o),{key:0,onSave:ie},{header:F(()=>[W(S.$slots,"header-prefix")]),prefix:F(()=>[W(S.$slots,"header-prefix")]),title:F(()=>[W(S.$slots,"header-title")]),"right-prefix":F(()=>[W(S.$slots,"header-right-prefix")]),"right-action":F(()=>[W(S.$slots,"header-right-action")]),"right-suffix":F(()=>[W(S.$slots,"header-right-suffix")]),_:3}))])]),ue("div",{class:tt(["epic-split-view-container",{"hidden-header":S.hiddenHeader}])},[te(Y(r)),te(Y(u)),te(Y(s))],2)])]),fallback:F(()=>[ue("div",Lt,[te(Y(i))])]),_:3}))}}),kt={component:async()=>await C(()=>import("./index-64848bec.9c42f5c8.js").then(e=>e.i),["assets/chunks/index-64848bec.9c42f5c8.js","assets/app.b200646e.js","assets/chunks/plugin-vue_export-helper-dad06003.1d61e2b9.js"]),defaultSchema:{label:"\u4EE3\u7801\u7F16\u8F91\u5668",type:"monacoEditor",field:"monacoEditor",icon:"epic-icon-write",input:!0},config:{attribute:[{label:"\u5B57\u6BB5\u540D",type:"input",field:"field"},{label:"\u6807\u9898",type:"input",field:"label"},{label:"\u9ED8\u8BA4\u503C",type:"monacoEditor",field:"componentProps.defaultValue"}]},bindModel:"model-value"},jt={component:async()=>await C(()=>import("./index-cebefbcc.e2b512af.js"),["assets/chunks/index-cebefbcc.e2b512af.js","assets/app.b200646e.js"]),defaultSchema:{label:"\u9875\u9762",type:"page",componentProps:{},children:[]},config:{attribute:[{label:"\u9875\u9762\u540D\u79F0",type:"input",componentProps:{placeholder:"\u8BF7\u8F93\u5165"},field:"name"}]}};function Ft(e){e.component("ETabPaneEditor",async()=>await C(()=>import("./index-521583d8.f84402f3.js"),["assets/chunks/index-521583d8.f84402f3.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/app.b200646e.js"])),e.component("EInputSize",async()=>await C(()=>import("./index-074313c9.65de1589.js"),["assets/chunks/index-074313c9.65de1589.js","assets/app.b200646e.js"])),e.component("EColEditor",async()=>await C(()=>import("./index-e8b268d3.f116b7a5.js"),["assets/chunks/index-e8b268d3.f116b7a5.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/app.b200646e.js"])),e.component("EActionEditor",async()=>await C(()=>import("./index-06305be9.1a3af8c4.js"),["assets/chunks/index-06305be9.1a3af8c4.js","assets/app.b200646e.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/chunks/vuedraggable.umd-95bb1123.93b8ed8d.js","assets/chunks/tree.vue_vue_type_script_setup_true_lang-413881e3.c137d095.js"])),e.component("ERuleEditor",async()=>await C(()=>import("./index-bd887f2a.ccda8766.js"),["assets/chunks/index-bd887f2a.ccda8766.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/app.b200646e.js"])),e.component("EOptionsEditor",async()=>await C(()=>import("./index-4851b3ee.94c6ea08.js"),["assets/chunks/index-4851b3ee.94c6ea08.js","assets/app.b200646e.js","assets/chunks/vuedraggable.umd-95bb1123.93b8ed8d.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js"])),e.component("ENode",async()=>await C(()=>import("./index-f66459f0.a7c3173a.js"),["assets/chunks/index-f66459f0.a7c3173a.js","assets/app.b200646e.js"])),e.registerActivitybar({id:"component_view",title:"\u7EC4\u4EF6",icon:"epic-icon-mokuai_1",component:async()=>await C(()=>import("./index-73bbb931.efd627f7.js"),["assets/chunks/index-73bbb931.efd627f7.js","assets/app.b200646e.js","assets/chunks/vuedraggable.umd-95bb1123.93b8ed8d.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js"])}),e.registerActivitybar({id:"sound_code_view",title:"\u6E90\u7801",icon:"epic-icon-daima1",component:async()=>await C(()=>import("./index-0831019b.38fe6ce6.js"),["assets/chunks/index-0831019b.38fe6ce6.js","assets/chunks/plugin-vue_export-helper-dad06003.1d61e2b9.js","assets/app.b200646e.js"])}),e.registerActivitybar({id:"outline_view",title:"\u5927\u7EB2",icon:"epic-icon-juxingkaobei",component:async()=>await C(()=>import("./outline-5fc5d5fc.11fb00ee.js"),["assets/chunks/outline-5fc5d5fc.11fb00ee.js","assets/app.b200646e.js","assets/chunks/tree.vue_vue_type_script_setup_true_lang-413881e3.c137d095.js","assets/chunks/icon.vue_vue_type_script_setup_true_lang-3f9e4127.6b0b97e0.js","assets/chunks/vuedraggable.umd-95bb1123.93b8ed8d.js"])}),e.registerRightSidebar({id:"attribute_view",title:"\u5C5E\u6027",component:async()=>await C(()=>import("./attributeView-1cc3630a.f5474d81.js"),["assets/chunks/attributeView-1cc3630a.f5474d81.js","assets/app.b200646e.js"])}),e.registerRightSidebar({id:"style_view",title:"\u6837\u5F0F",component:async()=>await C(()=>import("./styleView-6e28f390.5d309909.js"),["assets/chunks/styleView-6e28f390.5d309909.js","assets/app.b200646e.js"])}),e.registerRightSidebar({id:"event_view",title:"\u4E8B\u4EF6",component:async()=>await C(()=>import("./eventView-6b7c75a7.6ce4a873.js"),["assets/chunks/eventView-6b7c75a7.6ce4a873.js","assets/app.b200646e.js"])}),[kt,jt].forEach(n=>{e.registerComponent(n)})}Ft(oe);var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function on(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rn(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})}),t}var Le={exports:{}},ke;function Gt(){return ke||(ke=1,function(e,n){(function(t,o){e.exports=o()})(Ht,function(){var t=1e3,o=6e4,r=36e5,u="millisecond",s="second",i="minute",c="hour",m="day",g="week",b="month",v="quarter",w="year",L="date",H="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var a=["th","st","nd","rd"],l=f%100;return"["+f+(a[(l-20)%10]||a[l]||a[0])+"]"}},I=function(f,a,l){var h=String(f);return!h||h.length>=a?f:""+Array(a+1-h.length).join(l)+f},V={s:I,z:function(f){var a=-f.utcOffset(),l=Math.abs(a),h=Math.floor(l/60),d=l%60;return(a<=0?"+":"-")+I(h,2,"0")+":"+I(d,2,"0")},m:function f(a,l){if(a.date()<l.date())return-f(l,a);var h=12*(l.year()-a.year())+(l.month()-a.month()),d=a.clone().add(h,b),_=l-d<0,y=a.clone().add(h+(_?-1:1),b);return+(-(h+(l-d)/(_?d-y:y-d))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:b,y:w,w:g,d:m,D:L,h:c,m:i,s,ms:u,Q:v}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},x="en",k={};k[x]=N;var ie="$isDayjsObject",S=function(f){return f instanceof O||!(!f||!f[ie])},B=function f(a,l,h){var d;if(!a)return x;if(typeof a=="string"){var _=a.toLowerCase();k[_]&&(d=_),l&&(k[_]=l,d=_);var y=a.split("-");if(!d&&y.length>1)return f(y[0])}else{var E=a.name;k[E]=a,d=E}return!h&&d&&(x=d),d||!h&&x},D=function(f,a){if(S(f))return f.clone();var l=typeof a=="object"?a:{};return l.date=f,l.args=arguments,new O(l)},p=V;p.l=B,p.i=S,p.w=function(f,a){return D(f,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var O=function(){function f(l){this.$L=B(l.locale,null,!0),this.parse(l),this.$x=this.$x||l.x||{},this[ie]=!0}var a=f.prototype;return a.parse=function(l){this.$d=function(h){var d=h.date,_=h.utc;if(d===null)return new Date(NaN);if(p.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var y=d.match($);if(y){var E=y[2]-1||0,M=(y[7]||"0").substring(0,3);return _?new Date(Date.UTC(y[1],E,y[3]||1,y[4]||0,y[5]||0,y[6]||0,M)):new Date(y[1],E,y[3]||1,y[4]||0,y[5]||0,y[6]||0,M)}}return new Date(d)}(l),this.init()},a.init=function(){var l=this.$d;this.$y=l.getFullYear(),this.$M=l.getMonth(),this.$D=l.getDate(),this.$W=l.getDay(),this.$H=l.getHours(),this.$m=l.getMinutes(),this.$s=l.getSeconds(),this.$ms=l.getMilliseconds()},a.$utils=function(){return p},a.isValid=function(){return this.$d.toString()!==H},a.isSame=function(l,h){var d=D(l);return this.startOf(h)<=d&&d<=this.endOf(h)},a.isAfter=function(l,h){return D(l)<this.startOf(h)},a.isBefore=function(l,h){return this.endOf(h)<D(l)},a.$g=function(l,h,d){return p.u(l)?this[h]:this.set(d,l)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(l,h){var d=this,_=!!p.u(h)||h,y=p.p(l),E=function(ee,G){var q=p.w(d.$u?Date.UTC(d.$y,G,ee):new Date(d.$y,G,ee),d);return _?q:q.endOf(m)},M=function(ee,G){return p.w(d.toDate()[ee].apply(d.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(G)),d)},P=this.$W,j=this.$M,J=this.$D,se="set"+(this.$u?"UTC":"");switch(y){case w:return _?E(1,0):E(31,11);case b:return _?E(1,j):E(0,j+1);case g:var K=this.$locale().weekStart||0,de=(P<K?P+7:P)-K;return E(_?J-de:J+(6-de),j);case m:case L:return M(se+"Hours",0);case c:return M(se+"Minutes",1);case i:return M(se+"Seconds",2);case s:return M(se+"Milliseconds",3);default:return this.clone()}},a.endOf=function(l){return this.startOf(l,!1)},a.$set=function(l,h){var d,_=p.p(l),y="set"+(this.$u?"UTC":""),E=(d={},d[m]=y+"Date",d[L]=y+"Date",d[b]=y+"Month",d[w]=y+"FullYear",d[c]=y+"Hours",d[i]=y+"Minutes",d[s]=y+"Seconds",d[u]=y+"Milliseconds",d)[_],M=_===m?this.$D+(h-this.$W):h;if(_===b||_===w){var P=this.clone().set(L,1);P.$d[E](M),P.init(),this.$d=P.set(L,Math.min(this.$D,P.daysInMonth())).$d}else E&&this.$d[E](M);return this.init(),this},a.set=function(l,h){return this.clone().$set(l,h)},a.get=function(l){return this[p.p(l)]()},a.add=function(l,h){var d,_=this;l=Number(l);var y=p.p(h),E=function(j){var J=D(_);return p.w(J.date(J.date()+Math.round(j*l)),_)};if(y===b)return this.set(b,this.$M+l);if(y===w)return this.set(w,this.$y+l);if(y===m)return E(1);if(y===g)return E(7);var M=(d={},d[i]=o,d[c]=r,d[s]=t,d)[y]||1,P=this.$d.getTime()+l*M;return p.w(P,this)},a.subtract=function(l,h){return this.add(-1*l,h)},a.format=function(l){var h=this,d=this.$locale();if(!this.isValid())return d.invalidDate||H;var _=l||"YYYY-MM-DDTHH:mm:ssZ",y=p.z(this),E=this.$H,M=this.$m,P=this.$M,j=d.weekdays,J=d.months,se=d.meridiem,K=function(G,q,pe,ve){return G&&(G[q]||G(h,_))||pe[q].slice(0,ve)},de=function(G){return p.s(E%12||12,G,"0")},ee=se||function(G,q,pe){var ve=G<12?"AM":"PM";return pe?ve.toLowerCase():ve};return _.replace(R,function(G,q){return q||function(pe){switch(pe){case"YY":return String(h.$y).slice(-2);case"YYYY":return p.s(h.$y,4,"0");case"M":return P+1;case"MM":return p.s(P+1,2,"0");case"MMM":return K(d.monthsShort,P,J,3);case"MMMM":return K(J,P);case"D":return h.$D;case"DD":return p.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return K(d.weekdaysMin,h.$W,j,2);case"ddd":return K(d.weekdaysShort,h.$W,j,3);case"dddd":return j[h.$W];case"H":return String(E);case"HH":return p.s(E,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return ee(E,M,!0);case"A":return ee(E,M,!1);case"m":return String(M);case"mm":return p.s(M,2,"0");case"s":return String(h.$s);case"ss":return p.s(h.$s,2,"0");case"SSS":return p.s(h.$ms,3,"0");case"Z":return y}return null}(G)||y.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(l,h,d){var _,y=this,E=p.p(h),M=D(l),P=(M.utcOffset()-this.utcOffset())*o,j=this-M,J=function(){return p.m(y,M)};switch(E){case w:_=J()/12;break;case b:_=J();break;case v:_=J()/3;break;case g:_=(j-P)/6048e5;break;case m:_=(j-P)/864e5;break;case c:_=j/r;break;case i:_=j/o;break;case s:_=j/t;break;default:_=j}return d?_:p.a(_)},a.daysInMonth=function(){return this.endOf(b).$D},a.$locale=function(){return k[this.$L]},a.locale=function(l,h){if(!l)return this.$L;var d=this.clone(),_=B(l,h,!0);return _&&(d.$L=_),d},a.clone=function(){return p.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},f}(),A=O.prototype;return D.prototype=A,[["$ms",u],["$s",s],["$m",i],["$H",c],["$W",m],["$M",b],["$y",w],["$D",L]].forEach(function(f){A[f[1]]=function(a){return this.$g(a,f[0],f[1])}}),D.extend=function(f,a){return f.$i||(f(a,O,D),f.$i=!0),D},D.locale=B,D.isDayjs=S,D.unix=function(f){return D(1e3*f)},D.en=k[x],D.Ls=k,D.p={},D})}(Le)),Le.exports}Gt();async function sn(){const{setupElementPlus:e}=await C(()=>import("./index-bff0902e.b584476c.js").then(n=>n.bS),["assets/chunks/index-bff0902e.b584476c.js","assets/app.b200646e.js"]);e.bind(null,oe)()}export{Pt as A,Ee as C,Ht as F,on as G,Bt as J,Dt as M,De as O,Yt as Q,Ve as T,Ut as X,oe as Y,Jt as Z,re as a,lt as b,nn as c,Zt as e,sn as f,me as h,rn as l,Qt as n,Kt as o,Wt as q,Xt as r,en as s,qt as t,tn as u};
