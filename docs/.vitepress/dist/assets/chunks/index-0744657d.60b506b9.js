import{M as B,C as P,E as q}from"./index.4abc0d1b.js";import{m as D}from"./icon.vue_vue_type_script_setup_true_lang-eb196e28.b7e231b8.js";import{g as _,r as C,w as M,o as r,c as d,d as m,N as c,Y as x,e as b,s as F,f as I,u as h,P as U,G as E,x as A,h as k,l as G}from"../app.db33cb3d.js";const N=[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"},{label:"any",value:"any"}],j=[{label:"change",value:"change"},{label:"blur",value:"blur"}],w=["string","number","url","array","email"],L={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},S={key:0,class:"flex m-t-2 first:m-0"},T={class:"attr-label",title:"\u6821\u9A8C\u65F6\u673A"},z={class:"attr-input"},H=_({__name:"ERuleItem",props:{rule:{}},emits:["change","delete","update:rule"],setup(g,{emit:i}){const y=g,a=k({get(){return y.rule},set(e){i("update:rule",e)}}),o=G("pageManager",{}),f=k(()=>Object.entries(o.funcs.value).filter(([e,n])=>typeof n=="function").map(([e])=>({label:e,value:e}))),l=[{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",componentProps:{options:j,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"switch",label:"\u81EA\u5B9A\u4E49\u89C4\u5219",model:"isValidator"},{type:"select",label:"\u6821\u9A8C\u51FD\u6570",model:"validator",show(){return!!a.value.isValidator},componentProps:{options:f.value,placeholder:"\u6821\u9A8C\u51FD\u6570"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!a.value.isValidator},componentProps:{options:N,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6B63\u5219\u6821\u9A8C",model:"pattern",show(){return!a.value.isValidator},componentProps:{placeholder:"\u6B63\u5219\u6821\u9A8C"}},{type:"number",label:"\u5B57\u6BB5\u957F\u5EA6",model:"len",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u5B57\u6BB5\u957F\u5EA6"}},{type:"number",label:"\u6700\u5C0F\u957F\u5EA6",model:"min",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5C0F\u957F\u5EA6"}},{type:"number",label:"\u6700\u5927\u957F\u5EA6",model:"max",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5927\u957F\u5EA6"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}];function V(){const e=a.value;e.isValidator?(delete e.type,delete e.pattern,delete e.len,delete e.min,delete e.max):delete e.validator,i("change",e)}function p(){i("delete")}return(e,n)=>(r(),d("div",L,[(r(),d(c,null,x(l,(t,u)=>(r(),d(c,{key:u},[!t.show||t.show()?(r(),d("div",S,[m("div",T,U(t.label),1),m("div",z,[b(h(q),{modelValue:a.value[t.model],"onUpdate:modelValue":s=>a.value[t.model]=s,componentSchema:{...t,noFormItem:!0},onChange:V},null,8,["modelValue","onUpdate:modelValue","componentSchema"])])])):E("",!0)],64))),64)),m("div",{class:"rule-btn-delete absolute top-0 right-0 transition-all w-6 h-6 cursor-pointer rounded-bl-1 flex-center color-white",onClick:p},[b(h(D),{name:"icon-shanchu1"})])]))}}),J={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},O={key:0,class:"flex m-t-2 first:m-0"},R={class:"attr-label"},X={class:"flex-1"},Q=_({__name:"index",props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup(g,{emit:i}){const y=g,a=B.getComponent("button"),o=C({required:!1,message:"\u5FC5\u586B\u9879",type:"string",trigger:["change"]}),f=[{type:"switch",label:"\u5FC5\u586B\u9879",model:"required"},{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",show(){return!!o.value.required},componentProps:{options:j,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!!o.value.required},componentProps:{options:N,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",show(){return!!o.value.required},componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}],l=C([]);M(()=>y.modelValue,n=>{if(n){if(!n)return;l.value=[],n.forEach(t=>{typeof t.required<"u"?o.value=t:l.value.push(t)})}},{immediate:!0});function V(){l.value.push({message:"",trigger:["change"]}),p()}function p(){if(o.value.required){i("update:modelValue",P([...l.value,o.value]));return}if(l.value.length){i("update:modelValue",P(l.value));return}i("update:modelValue",void 0)}function e(n){l.value.splice(n,1),p()}return(n,t)=>(r(),d("div",null,[m("div",J,[(r(),d(c,null,x(f,(u,s)=>(r(),d(c,{key:s},[!u.show||u.show()?(r(),d("div",O,[m("div",R,U(u.label),1),m("div",X,[b(h(q),{modelValue:o.value[u.model],"onUpdate:modelValue":v=>o.value[u.model]=v,componentSchema:{...u,noFormItem:!0},onChange:p},null,8,["modelValue","onUpdate:modelValue","componentSchema"])])])):E("",!0)],64))),64))]),(r(!0),d(c,null,x(l.value,(u,s)=>(r(),A(H,{key:s,rule:l.value[s],"onUpdate:rule":v=>l.value[s]=v,onDelete:v=>e(s),onChange:p},null,8,["rule","onUpdate:rule","onDelete"]))),128)),b(h(a),{class:"m-t-2",onClick:V},{default:F(()=>[I(" \u6DFB\u52A0\u89C4\u5219 ")]),_:1})]))}});export{Q as default};
