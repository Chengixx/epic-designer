import{bt as R,bu as M,bv as D,bw as F,bx as T,by as y}from"../guide_components_e-designer.md.ee402248.js";import{h as B,q as U,i as L,z as j,r as k,w as V,p as b,o as g,j as C,k as p,a as t,c as O,U as N,a1 as P,u as a,l as f,S as q,n as I,A as $,m as E,b as S}from"../app.c181f4ec.js";import{_ as J}from"./node.vue_vue_type_script_setup_true_lang.778c5354.js";const K={class:"epic-builder-main"},G={class:"loading-box"},H=B({__name:"builder",props:{pageSchema:{}},emits:["ready"],setup(w,{expose:v,emit:l}){const n=w,i=R(()=>U(()=>import("./index.bc094080.js"),["assets/chunks/index.bc094080.js","assets/app.c181f4ec.js"])),o=M(),c=L({}),x=j(),u=k({}),r=L({schemas:[]});V(()=>n.pageSchema,e=>{D(r,e)},{immediate:!0,deep:!0}),V(()=>r.script,e=>{e&&e!==""&&o.setMethods(e)},{immediate:!0}),b("formData",c),b("slots",x),b("pageManager",o),b("forms",u),b("pageSchema",r);async function m(e="default"){var d;return((d=u.value)==null?void 0:d[e])?c:(console.error(`\u8868\u5355 [name=${e}] \u4E0D\u5B58\u5728`),!1)}async function _(e="default"){var d;const h=(d=u.value)==null?void 0:d[e];return h?(await(h==null?void 0:h.validate()),c):(console.error(`\u8868\u5355 [name=${e}] \u4E0D\u5B58\u5728`),!1)}function s(e){Object.assign(c,e)}function A(){I(()=>{l("ready",{pageManager:o})})}return v({getData:m,setData:s,validate:_}),(e,h)=>(g(),C(q,{onResolve:A},{default:p(()=>[t("div",K,[(g(!0),O(N,null,P(r.schemas,(d,z)=>(g(),C(a(J),{key:z,record:d},null,8,["record"]))),128))])]),fallback:p(()=>[t("div",G,[f(a(i))])]),_:1}))}}),Q="/epic-designer/assets/logo.2098174b.png",W={class:"min-w-750px rounded bg-white"},X=B({__name:"index",setup(w,{expose:v}){const l=F.getComponent("modal"),n=k(!1),i=$("pageSchema"),o=k(null),c=k("");function x(){n.value=!1}function u(){n.value=!0,c.value=T()}async function r(){const m=await o.value.validate();console.log("\u8868\u5355\u7ED3\u679C\u4E3A\uFF1A",m)}return v({handleOpen:u}),(m,_)=>(g(),C(a(l),{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=s=>n.value=s),title:"\u9884\u89C8",class:"w-900px",width:"900px",onClose:x,onOk:r,okText:"\u8F93\u51FA\u7ED3\u679C"},{default:p(()=>[t("div",W,[(g(),C(a(H),{key:c.value,ref_key:"kb",ref:o,"page-schema":a(i)},null,8,["page-schema"]))])]),_:1},8,["modelValue"]))}}),Y={class:"epic-header relative"},Z={class:"epic-header-item items-center flex text-12px text-#3d3d3d"},ee=t("img",{src:Q,class:"w-17px h-17px",alt:"",srcset:""},null,-1),se=t("span",{class:"ml-4"}," epic-designer",-1),te={class:"epic-header-item epic-header-title absolute text-12px text-#3d3d3d"},ae={class:"epic-header-item flex flex items-center"},ne=t("span",{class:"iconfont icon-chexiao2x"},null,-1),oe=t("span",{class:"iconfont icon-fanhui2x"},null,-1),ce=t("span",{class:"iconfont icon-yulan",style:{"margin-right":"6px"}},null,-1),le=t("span",{class:"iconfont icon-yulan",style:{"margin-right":"6px"}},null,-1),de=B({__name:"index",emits:["save"],setup(w,{emit:v}){const l=$("pageSchema"),n=$("designer"),i=F.getComponent("button"),o=k(null),c=y.recordList,x=y.undoList;function u(){o.value.handleOpen()}function r(){const s=y.undo();!s||(D(l.schemas,s),n.setCheckedNode(l.schemas[0]))}function m(){const s=y.redo();!s||(D(l.schemas,s),n.setCheckedNode(l.schemas[0]))}function _(){v("save")}return(s,A)=>(g(),O("header",Y,[t("div",Z,[E(s.$slots,"prefix",{},()=>[ee,se])]),t("div",te,[E(s.$slots,"title",{},()=>[S("epic-designer\u9ED8\u8BA4\u9879\u76EE")])]),t("div",ae,[f(a(i),{size:"small",disabled:!a(c).length,onClick:r},{default:p(()=>[ne]),_:1},8,["disabled"]),f(a(i),{size:"small",disabled:!a(x).length,onClick:m},{default:p(()=>[oe]),_:1},8,["disabled"]),f(a(i),{size:"small",onClick:u},{default:p(()=>[ce,S(" \u9884\u89C8 ")]),_:1}),f(a(i),{size:"small",onClick:_},{default:p(()=>[le,S(" \u4FDD\u5B58 ")]),_:1}),E(s.$slots,"suffix")]),f(X,{ref_key:"preview",ref:o},null,512)]))}});export{de as default};
