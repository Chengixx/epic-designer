import{M as D,C as P,x as q}from"./index.0d7c8eb8.js";import{p as M}from"./icon.vue_vue_type_script_setup_true_lang-cc078b52.fc49277e.js";import{e as _,r as k,w as E,o as r,c as d,b as m,N as c,Y as x,d as b,s as F,P as I,u as h,t as U,G as N,x as A,f as C,k as G}from"../app.c22c6c8c.js";const j=[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"},{label:"any",value:"any"}],B=[{label:"change",value:"change"},{label:"blur",value:"blur"}],w=["string","number","url","array","email"],L={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},S={key:0,class:"flex m-t-2 first:m-0"},T={class:"attr-label",title:"\u6821\u9A8C\u65F6\u673A"},$={class:"attr-input"},z=_({__name:"ERuleItem",props:{rule:{}},emits:["change","delete","update:rule"],setup(g,{emit:i}){const y=g,a=C({get(){return y.rule},set(e){i("update:rule",e)}}),o=G("pageManager",{}),f=C(()=>Object.entries(o.funcs.value).filter(([e,n])=>typeof n=="function").map(([e])=>({label:e,value:e}))),l=[{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",componentProps:{options:B,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"switch",label:"\u81EA\u5B9A\u4E49\u89C4\u5219",model:"isValidator"},{type:"select",label:"\u6821\u9A8C\u51FD\u6570",model:"validator",show(){return!!a.value.isValidator},componentProps:{options:f.value,placeholder:"\u6821\u9A8C\u51FD\u6570"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!a.value.isValidator},componentProps:{options:j,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6B63\u5219\u6821\u9A8C",model:"pattern",show(){return!a.value.isValidator},componentProps:{placeholder:"\u6B63\u5219\u6821\u9A8C"}},{type:"number",label:"\u5B57\u6BB5\u957F\u5EA6",model:"len",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u5B57\u6BB5\u957F\u5EA6"}},{type:"number",label:"\u6700\u5C0F\u957F\u5EA6",model:"min",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5C0F\u957F\u5EA6"}},{type:"number",label:"\u6700\u5927\u957F\u5EA6",model:"max",show(){var e;return w.includes((e=a.value.type)!=null?e:"")},componentProps:{min:0,placeholder:"\u6700\u5927\u957F\u5EA6"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}];function V(){const e=a.value;e.isValidator?(delete e.type,delete e.pattern,delete e.len,delete e.min,delete e.max):delete e.validator,i("change",e)}function p(){i("delete")}return(e,n)=>(r(),d("div",L,[(r(),d(c,null,x(l,(t,u)=>(r(),d(c,{key:u},[!t.show||t.show()?(r(),d("div",S,[m("div",T,U(t.label),1),m("div",$,[b(h(q),{modelValue:a.value[t.model],"onUpdate:modelValue":s=>a.value[t.model]=s,record:{...t,noFormItem:!0},onChange:V},null,8,["modelValue","onUpdate:modelValue","record"])])])):N("",!0)],64))),64)),m("div",{class:"rule-btn-delete absolute top-0 right-0 transition-all w-6 h-6 cursor-pointer rounded-bl-1 flex-center color-white",onClick:p},[b(h(M),{name:"icon-shanchu1"})])]))}}),H={class:"rule-item-main bg-white m-t-2 p-2 rounded border border-solid border-gray-200 hover:border-primary transition-all relative"},J={key:0,class:"flex m-t-2 first:m-0"},O={class:"attr-label"},R={class:"flex-1"},Q=_({__name:"index",props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup(g,{emit:i}){const y=g,a=D.getComponent("button"),o=k({required:!1,message:"\u5FC5\u586B\u9879",type:"string",trigger:["change"]}),f=[{type:"switch",label:"\u5FC5\u586B\u9879",model:"required"},{type:"select",label:"\u6821\u9A8C\u65F6\u673A",model:"trigger",show(){return!!o.value.required},componentProps:{options:B,placeholder:"\u6821\u9A8C\u65F6\u673A",multiple:!0,mode:"multiple"}},{type:"select",label:"\u7C7B\u578B",model:"type",show(){return!!o.value.required},componentProps:{options:j,placeholder:"\u7C7B\u578B"}},{type:"input",label:"\u6821\u9A8C\u4FE1\u606F",model:"message",show(){return!!o.value.required},componentProps:{placeholder:"\u6821\u9A8C\u4FE1\u606F"}}],l=k([]);E(()=>y.modelValue,n=>{if(n){if(!n)return;l.value=[],n.forEach(t=>{typeof t.required<"u"?o.value=t:l.value.push(t)})}},{immediate:!0});function V(){l.value.push({message:"",trigger:["change"]}),p()}function p(){if(o.value.required){i("update:modelValue",P([...l.value,o.value]));return}if(l.value.length){i("update:modelValue",P(l.value));return}i("update:modelValue",void 0)}function e(n){l.value.splice(n,1),p()}return(n,t)=>(r(),d("div",null,[m("div",H,[(r(),d(c,null,x(f,(u,s)=>(r(),d(c,{key:s},[!u.show||u.show()?(r(),d("div",J,[m("div",O,U(u.label),1),m("div",R,[b(h(q),{modelValue:o.value[u.model],"onUpdate:modelValue":v=>o.value[u.model]=v,record:{...u,noFormItem:!0},onChange:p},null,8,["modelValue","onUpdate:modelValue","record"])])])):N("",!0)],64))),64))]),(r(!0),d(c,null,x(l.value,(u,s)=>(r(),A(z,{key:s,rule:l.value[s],"onUpdate:rule":v=>l.value[s]=v,onDelete:v=>e(s),onChange:p},null,8,["rule","onUpdate:rule","onDelete"]))),128)),b(h(a),{class:"m-t-2",onClick:V},{default:F(()=>[I(" \u6DFB\u52A0\u89C4\u5219 ")]),_:1})]))}});export{Q as default};
