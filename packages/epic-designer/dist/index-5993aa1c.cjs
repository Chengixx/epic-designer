"use strict";const x=require("./_commonjsHelpers-6763f629.cjs"),He=require("./_vue_commonjs-external-0743e21a.cjs"),m=require("./index-8a4d6b86.cjs"),me=require("./index-a2c63f32.cjs"),k=require("./index-5ec7a6fc.cjs"),A=require("./index-82c933df.cjs");function qe(t,i){for(var l=0;l<i.length;l++){const s=i[l];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const f=Object.getOwnPropertyDescriptor(s,a);f&&Object.defineProperty(t,a,f.get?f:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var ve={},be={},he={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});const ze=A.styles,We=k.styles,Ke=m.common,Je={name:"InputNumber",common:Ke.commonDark,peers:{Button:ze.buttonDark,Input:We.inputDark},self(t){const{textColorDisabled:i}=t;return{iconColorDisabled:i}}};Z.default=Je;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});const Qe=A.styles,Xe=k.styles,Ye=m.common,Ze=m._mixins,et=t=>{const{textColorDisabled:i}=t;return{iconColorDisabled:i}},tt=(0,Ze.createTheme)({name:"InputNumber",common:Ye.commonLight,peers:{Button:Qe.buttonLight,Input:Xe.inputLight},self:et});ee.default=tt;var U={},te={};Object.defineProperty(te,"__esModule",{value:!0});const pe=m.cssr;te.default=(0,pe.cB)("input-number",[(0,pe.cM)("rtl",`
 direction: rtl;
 `)]);var nt=x.commonjsGlobal&&x.commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U,"__esModule",{value:!0});U.inputNumberRtl=void 0;const rt=nt(te),ut=k.rtl,lt=A.rtl;U.inputNumberRtl={name:"InputNumber",style:rt.default,peers:[ut.inputRtl,lt.buttonRtl]};(function(t){var i=x.commonjsGlobal&&x.commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.inputNumberRtl=t.inputNumberLight=t.inputNumberDark=void 0;var l=Z;Object.defineProperty(t,"inputNumberDark",{enumerable:!0,get:function(){return i(l).default}});var s=ee;Object.defineProperty(t,"inputNumberLight",{enumerable:!0,get:function(){return i(s).default}});var a=U;Object.defineProperty(t,"inputNumberRtl",{enumerable:!0,get:function(){return a.inputNumberRtl}})})(he);var d={};Object.defineProperty(d,"__esModule",{value:!0});d.parseNumber=d.format=d.validator=d.isWipValue=d.parse=void 0;function it(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}d.parse=it;function ot(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^\.\d+$/.test(t))}d.isWipValue=ot;function at(t){return t==null?!0:!Number.isNaN(t)}d.validator=at;function st(t,i){return t==null?"":i===void 0?String(t):t.toFixed(i)}d.format=st;function dt(t){if(t===null)return null;if(typeof t=="number")return t;{const i=Number(t);return Number.isNaN(i)?null:i}}d.parseNumber=dt;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});const Y=m.cssr;ne.default=(0,Y.c)([(0,Y.cB)("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),(0,Y.cB)("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);(function(t){var i=x.commonjsGlobal&&x.commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.inputNumberProps=void 0;const l=He.require$$0,s=m.require$$1,a=m.require$$2,f=m.require$$3,re=me.icons,ge=k.input,ue=me._internal,le=A.button,O=m._mixins,c=m._utils,_e=he,p=d,ye=i(ne),Ne=m.useRtl,ie=800,oe=100;t.inputNumberProps=Object.assign(Object.assign({},O.useTheme.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),t.default=(0,l.defineComponent)({name:"InputNumber",props:t.inputNumberProps,setup(n){process.env.NODE_ENV!=="production"&&(0,l.watchEffect)(()=>{n.onChange!==void 0&&(0,c.warnOnce)("input-number","`on-change` is deprecated, please use `on-update:value` instead")});const{mergedBorderedRef:v,mergedClsPrefixRef:P,mergedRtlRef:E}=(0,O.useConfig)(n),b=(0,O.useTheme)("InputNumber","-input-number",ye.default,_e.inputNumberLight,n,P),{localeRef:V}=(0,O.useLocale)("InputNumber"),T=(0,O.useFormItem)(n),{mergedSizeRef:Ie,mergedDisabledRef:xe,mergedStatusRef:Ve}=T,N=(0,l.ref)(null),ae=(0,l.ref)(null),se=(0,l.ref)(null),L=(0,l.ref)(n.defaultValue),Me=(0,l.toRef)(n,"value"),_=(0,a.useMergedState)(Me,L),M=(0,l.ref)(""),G=e=>{const r=String(e).split(".")[1];return r?r.length:0},Pe=e=>{const r=[n.min,n.max,n.step,e].map(u=>u===void 0?0:G(u));return Math.max(...r)},De=(0,a.useMemo)(()=>{const{placeholder:e}=n;return e!==void 0?e:V.value.placeholder}),C=(0,a.useMemo)(()=>{const e=(0,p.parseNumber)(n.step);return e!==null?e===0?1:Math.abs(e):1}),de=(0,a.useMemo)(()=>{const e=(0,p.parseNumber)(n.min);return e!==null?e:null}),fe=(0,a.useMemo)(()=>{const e=(0,p.parseNumber)(n.max);return e!==null?e:null}),R=e=>{const{value:r}=_;if(e===r){D();return}const{"onUpdate:value":u,onUpdateValue:o,onChange:g}=n,{nTriggerFormInput:y,nTriggerFormChange:w}=T;g&&(0,c.call)(g,e),o&&(0,c.call)(o,e),u&&(0,c.call)(u,e),L.value=e,y(),w()},h=({offset:e,doUpdateIfValid:r,fixPrecision:u,isInputing:o})=>{const{value:g}=M;if(o&&(0,p.isWipValue)(g))return!1;const y=(n.parse||p.parse)(g);if(y===null)return r&&R(null),null;if((0,p.validator)(y)){const w=G(y),{precision:j}=n;if(j!==void 0&&j<w&&!u)return!1;let I=parseFloat((y+e).toFixed(j??Pe(y)));if((0,p.validator)(I)){const{value:Q}=fe,{value:X}=de;if(Q!==null&&I>Q){if(!r||o)return!1;I=Q}if(X!==null&&I<X){if(!r||o)return!1;I=X}return n.validator&&!n.validator(I)?!1:(r&&R(I),I)}}return!1},D=()=>{const{value:e}=_;if((0,p.validator)(e)){const{format:r,precision:u}=n;r?M.value=r(e):e===null||u===void 0||G(e)>u?M.value=(0,p.format)(e,void 0):M.value=(0,p.format)(e,u)}else M.value=String(e)};D();const we=(0,a.useMemo)(()=>h({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),H=(0,a.useMemo)(()=>{const{value:e}=_;if(n.validator&&e===null)return!1;const{value:r}=C;return h({offset:-r,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),q=(0,a.useMemo)(()=>{const{value:e}=_;if(n.validator&&e===null)return!1;const{value:r}=C;return h({offset:+r,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Oe(e){const{onFocus:r}=n,{nTriggerFormFocus:u}=T;r&&(0,c.call)(r,e),u()}function Re(e){var r,u;if(e.target===((r=N.value)===null||r===void 0?void 0:r.wrapperElRef))return;const o=h({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(o!==!1){const w=(u=N.value)===null||u===void 0?void 0:u.inputElRef;w&&(w.value=String(o||"")),_.value===o&&D()}else D();const{onBlur:g}=n,{nTriggerFormBlur:y}=T;g&&(0,c.call)(g,e),y(),(0,l.nextTick)(()=>{D()})}function Be(e){const{onClear:r}=n;r&&(0,c.call)(r,e)}function z(){const{value:e}=q;if(!e){J();return}const{value:r}=_;if(r===null)n.validator||R(ce());else{const{value:u}=C;h({offset:u,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function W(){const{value:e}=H;if(!e){K();return}const{value:r}=_;if(r===null)n.validator||R(ce());else{const{value:u}=C;h({offset:-u,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Se=Oe,je=Re;function ce(){if(n.validator)return null;const{value:e}=de,{value:r}=fe;return e!==null?Math.max(0,e):r!==null?Math.min(0,r):0}function Te(e){Be(e),R(null)}function Ce(e){var r,u,o;!((r=se.value)===null||r===void 0)&&r.$el.contains(e.target)&&e.preventDefault(),!((u=ae.value)===null||u===void 0)&&u.$el.contains(e.target)&&e.preventDefault(),(o=N.value)===null||o===void 0||o.activate()}let B=null,S=null,$=null;function K(){$&&(window.clearTimeout($),$=null),B&&(window.clearInterval(B),B=null)}function J(){F&&(window.clearTimeout(F),F=null),S&&(window.clearInterval(S),S=null)}function $e(){K(),$=window.setTimeout(()=>{B=window.setInterval(()=>{W()},oe)},ie),(0,f.on)("mouseup",document,K,{once:!0})}let F=null;function Fe(){J(),F=window.setTimeout(()=>{S=window.setInterval(()=>{z()},oe)},ie),(0,f.on)("mouseup",document,J,{once:!0})}const ke=()=>{S||z()},Ae=()=>{B||W()};function Ue(e){var r,u;if(e.key==="Enter"){if(e.target===((r=N.value)===null||r===void 0?void 0:r.wrapperElRef))return;h({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((u=N.value)===null||u===void 0||u.deactivate())}else if(e.key==="ArrowUp"){if(!q.value||n.keyboard.ArrowUp===!1)return;e.preventDefault(),h({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}else if(e.key==="ArrowDown"){if(!H.value||n.keyboard.ArrowDown===!1)return;e.preventDefault(),h({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&W()}}function Ee(e){M.value=e,n.updateValueOnInput&&!n.format&&!n.parse&&n.precision===void 0&&h({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}(0,l.watch)(_,()=>{D()});const Le={focus:()=>{var e;return(e=N.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=N.value)===null||e===void 0?void 0:e.blur()}},Ge=(0,Ne.useRtl)("InputNumber",E,P);return Object.assign(Object.assign({},Le),{rtlEnabled:Ge,inputInstRef:N,minusButtonInstRef:ae,addButtonInstRef:se,mergedClsPrefix:P,mergedBordered:v,uncontrolledValue:L,mergedValue:_,mergedPlaceholder:De,displayedValueInvalid:we,mergedSize:Ie,mergedDisabled:xe,displayedValue:M,addable:q,minusable:H,mergedStatus:Ve,handleFocus:Se,handleBlur:je,handleClear:Te,handleMouseDown:Ce,handleAddClick:ke,handleMinusClick:Ae,handleAddMousedown:Fe,handleMinusMousedown:$e,handleKeyDown:Ue,handleUpdateDisplayedValue:Ee,mergedTheme:b,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:(0,l.computed)(()=>{const{self:{iconColorDisabled:e}}=b.value,[r,u,o,g]=(0,s.rgba)(e);return{textColorTextDisabled:`rgb(${r}, ${u}, ${o})`,opacityDisabled:`${g}`}})})},render(){const{mergedClsPrefix:n,$slots:v}=this,P=()=>(0,l.h)(le.NxButton,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>(0,c.resolveSlot)(v["minus-icon"],()=>[(0,l.h)(ue.NBaseIcon,{clsPrefix:n},{default:()=>(0,l.h)(re.RemoveIcon,null)})])}),E=()=>(0,l.h)(le.NxButton,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>(0,c.resolveSlot)(v["add-icon"],()=>[(0,l.h)(ue.NBaseIcon,{clsPrefix:n},{default:()=>(0,l.h)(re.AddIcon,null)})])});return(0,l.h)("div",{class:[`${n}-input-number`,this.rtlEnabled&&`${n}-input-number--rtl`]},(0,l.h)(ge.NInput,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var b;return this.showButton&&this.buttonPlacement==="both"?[P(),(0,c.resolveWrappedSlot)(v.prefix,V=>V?(0,l.h)("span",{class:`${n}-input-number-prefix`},V):null)]:(b=v.prefix)===null||b===void 0?void 0:b.call(v)},suffix:()=>{var b;return this.showButton?[(0,c.resolveWrappedSlot)(v.suffix,V=>V?(0,l.h)("span",{class:`${n}-input-number-suffix`},V):null),this.buttonPlacement==="right"?P():null,E()]:(b=v.suffix)===null||b===void 0?void 0:b.call(v)}}))}})})(be);(function(t){var i=x.commonjsGlobal&&x.commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.inputNumberProps=t.NInputNumber=void 0;var l=be;Object.defineProperty(t,"NInputNumber",{enumerable:!0,get:function(){return i(l).default}}),Object.defineProperty(t,"inputNumberProps",{enumerable:!0,get:function(){return l.inputNumberProps}})})(ve);const ft=qe({__proto__:null},[ve]);exports.index=ft;
