"use strict";const B=require("./_commonjsHelpers-6763f629.cjs"),Ze=require("./_vue_commonjs-external-0743e21a.cjs"),O=require("./index-8a4d6b86.cjs"),F=require("./index-a2c63f32.cjs"),et=require("./utils-40617e17.cjs"),tt=require("./fade-in-scale-up.cssr-b13248bc.cjs");function nt(s,v){for(var l=0;l<v.length;l++){const c=v[l];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in s)){const M=Object.getOwnPropertyDescriptor(c,h);M&&Object.defineProperty(s,h,M.get?M:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var be={},_e={},ye={},Q={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.self=void 0;const lt=F.styles,it=F.styles$1,at=O.common,ot=O._mixins;function Oe(s){const{boxShadow2:v}=s;return{menuBoxShadow:v}}k.self=Oe;const rt=(0,ot.createTheme)({name:"Select",common:at.commonLight,peers:{InternalSelection:lt.internalSelectionLight,InternalSelectMenu:it.internalSelectMenuLight},self:Oe});k.default=rt;Object.defineProperty(Q,"__esModule",{value:!0});const ut=F.styles,st=F.styles$1,ct=O.common,dt=k,ft={name:"Select",common:ct.commonDark,peers:{InternalSelection:ut.internalSelectionDark,InternalSelectMenu:st.internalSelectMenuDark},self:dt.self};Q.default=ft;(function(s){var v=B.commonjsGlobal&&B.commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0}),s.selectLight=s.selectDark=void 0;var l=Q;Object.defineProperty(s,"selectDark",{enumerable:!0,get:function(){return v(l).default}});var c=k;Object.defineProperty(s,"selectLight",{enumerable:!0,get:function(){return v(c).default}})})(ye);var X={};Object.defineProperty(X,"__esModule",{value:!0});const J=O.cssr,ht=tt.fadeInScaleUp_cssr;X.default=(0,J.c)([(0,J.cB)("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),(0,J.cB)("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[(0,ht.fadeInScaleUpTransition)({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]);(function(s){var v=B.commonjsGlobal&&B.commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0}),s.selectProps=void 0;const l=Ze.require$$0,c=O.require$$1,h=F.require$$1,M=O.require$$1$1,$=O.require$$2,Y=F.require$$2,T=O._mixins,d=O._utils,Z=F._internal,Se=ye,C=et.utils,Me=v(X);s.selectProps=Object.assign(Object.assign({},T.useTheme.props),{to:d.useAdjustedTo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),s.default=(0,l.defineComponent)({name:"Select",props:s.selectProps,setup(t){process.env.NODE_ENV!=="production"&&(0,l.watchEffect)(()=>{t.items!==void 0&&(0,d.warnOnce)("select","`items` is deprecated, please use `options` instead."),t.onChange!==void 0&&(0,d.warnOnce)("select","`on-change` is deprecated, please use `on-update:value` instead.")});const{mergedClsPrefixRef:g,mergedBorderedRef:A,namespaceRef:w,inlineThemeDisabled:m}=(0,T.useConfig)(t),ee=(0,T.useTheme)("Select","-select",Me.default,Se.selectLight,t,g),G=(0,l.ref)(t.defaultValue),we=(0,l.toRef)(t,"value"),D=(0,$.useMergedState)(we,G),j=(0,l.ref)(!1),P=(0,l.ref)(""),Fe=(0,l.computed)(()=>{const{valueField:e,childrenField:n}=t,i=(0,C.createTmOptions)(e,n);return(0,h.createTreeMate)(Re.value,i)}),te=(0,l.computed)(()=>(0,C.createValOptMap)(ie.value,t.valueField,t.childrenField)),z=(0,l.ref)(!1),p=(0,$.useMergedState)((0,l.toRef)(t,"show"),z),b=(0,l.ref)(null),ne=(0,l.ref)(null),I=(0,l.ref)(null),{localeRef:Te}=(0,T.useLocale)("Select"),Ce=(0,l.computed)(()=>{var e;return(e=t.placeholder)!==null&&e!==void 0?e:Te.value.placeholder}),K=(0,$.useCompitable)(t,["items","options"]),V=[],_=(0,l.ref)([]),S=(0,l.ref)([]),L=(0,l.ref)(new Map),le=(0,l.computed)(()=>{const{fallbackOption:e}=t;if(e===void 0){const{labelField:n,valueField:i}=t;return u=>({[n]:String(u),[i]:u})}return e===!1?!1:n=>Object.assign(e(n),{value:n})}),ie=(0,l.computed)(()=>S.value.concat(_.value).concat(K.value)),Pe=(0,l.computed)(()=>{const{filter:e}=t;if(e)return e;const{labelField:n,valueField:i}=t;return(u,a)=>{if(!a)return!1;const r=a[n];if(typeof r=="string")return(0,C.patternMatched)(u,r);const o=a[i];return typeof o=="string"?(0,C.patternMatched)(u,o):typeof o=="number"?(0,C.patternMatched)(u,String(o)):!1}}),Re=(0,l.computed)(()=>{if(t.remote)return K.value;{const{value:e}=ie,{value:n}=P;return!n.length||!t.filterable?e:(0,C.filterOptions)(e,Pe.value,n,t.childrenField)}});function H(e){const n=t.remote,{value:i}=L,{value:u}=te,{value:a}=le,r=[];return e.forEach(o=>{if(u.has(o))r.push(u.get(o));else if(n&&i.has(o))r.push(i.get(o));else if(a){const f=a(o);f&&r.push(f)}}),r}const ae=(0,l.computed)(()=>{if(t.multiple){const{value:e}=D;return Array.isArray(e)?H(e):[]}return null}),oe=(0,l.computed)(()=>{const{value:e}=D;return!t.multiple&&!Array.isArray(e)?e===null?null:H([e])[0]||null:null}),U=(0,T.useFormItem)(t),{mergedSizeRef:Be,mergedDisabledRef:N,mergedStatusRef:ke}=U;function q(e,n){const{onChange:i,"onUpdate:value":u,onUpdateValue:a}=t,{nTriggerFormChange:r,nTriggerFormInput:o}=U;i&&(0,d.call)(i,e,n),a&&(0,d.call)(a,e,n),u&&(0,d.call)(u,e,n),G.value=e,r(),o()}function re(e){const{onBlur:n}=t,{nTriggerFormBlur:i}=U;n&&(0,d.call)(n,e),i()}function Ae(){const{onClear:e}=t;e&&(0,d.call)(e)}function De(e){const{onFocus:n,showOnFocus:i}=t,{nTriggerFormFocus:u}=U;n&&(0,d.call)(n,e),u(),i&&x()}function je(e){const{onSearch:n}=t;n&&(0,d.call)(n,e)}function Ie(e){const{onScroll:n}=t;n&&(0,d.call)(n,e)}function ue(){var e;const{remote:n,multiple:i}=t;if(n){const{value:u}=L;if(i){const{valueField:a}=t;(e=ae.value)===null||e===void 0||e.forEach(r=>{u.set(r[a],r)})}else{const a=oe.value;a&&u.set(a[t.valueField],a)}}}function se(e){const{onUpdateShow:n,"onUpdate:show":i}=t;n&&(0,d.call)(n,e),i&&(0,d.call)(i,e),z.value=e}function x(){N.value||(se(!0),z.value=!0,t.filterable&&me())}function y(){se(!1)}function ce(){P.value="",S.value=V}const E=(0,l.ref)(!1);function Ve(){t.filterable&&(E.value=!0)}function xe(){t.filterable&&(E.value=!1,p.value||ce())}function $e(){N.value||(p.value?t.filterable?me():y():x())}function ze(e){var n,i;!((i=(n=I.value)===null||n===void 0?void 0:n.selfRef)===null||i===void 0)&&i.contains(e.relatedTarget)||(j.value=!1,re(e),y())}function Le(e){De(e),j.value=!0}function Ue(e){j.value=!0}function Ne(e){var n;!((n=b.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(j.value=!1,re(e),y())}function qe(){var e;(e=b.value)===null||e===void 0||e.focus(),y()}function Ee(e){var n;p.value&&(!((n=b.value)===null||n===void 0)&&n.$el.contains((0,c.getPreciseEventTarget)(e))||y())}function We(e){if(!Array.isArray(e))return[];if(le.value)return Array.from(e);{const{remote:n}=t,{value:i}=te;if(n){const{value:u}=L;return e.filter(a=>i.has(a)||u.has(a))}else return e.filter(u=>i.has(u))}}function de(e){W(e.rawNode)}function W(e){if(N.value)return;const{tag:n,remote:i,clearFilterAfterSelect:u,valueField:a}=t;if(n&&!i){const{value:r}=S,o=r[0]||null;if(o){const f=_.value;f.length?f.push(o):_.value=[o],S.value=V}}if(i&&L.value.set(e[a],e),t.multiple){const r=We(D.value),o=r.findIndex(f=>f===e[a]);if(~o){if(r.splice(o,1),n&&!i){const f=fe(e[a]);~f&&(_.value.splice(f,1),u&&(P.value=""))}}else r.push(e[a]),u&&(P.value="");q(r,H(r))}else{if(n&&!i){const r=fe(e[a]);~r?_.value=[_.value[r]]:_.value=V}ve(),y(),q(e[a],e)}}function fe(e){return _.value.findIndex(i=>i[t.valueField]===e)}function Ge(e){p.value||x();const{value:n}=e.target;P.value=n;const{tag:i,remote:u}=t;if(je(n),i&&!u){if(!n){S.value=V;return}const{onCreate:a}=t,r=a?a(n):{[t.labelField]:n,[t.valueField]:n},{valueField:o}=t;K.value.some(f=>f[o]===r[o])||_.value.some(f=>f[o]===r[o])?S.value=V:S.value=[r]}}function Ke(e){e.stopPropagation();const{multiple:n}=t;!n&&t.filterable&&y(),Ae(),n?q([],[]):q(null,null)}function He(e){!(0,c.happensIn)(e,"action")&&!(0,c.happensIn)(e,"empty")&&e.preventDefault()}function Je(e){Ie(e)}function he(e){var n,i,u,a,r;if(!t.keyboard){e.preventDefault();return}switch(e.key){case" ":if(t.filterable)break;e.preventDefault();case"Enter":if(!(!((n=b.value)===null||n===void 0)&&n.isComposing)){if(p.value){const o=(i=I.value)===null||i===void 0?void 0:i.getPendingTmNode();o?de(o):t.filterable||(y(),ve())}else if(x(),t.tag&&E.value){const o=S.value[0];if(o){const f=o[t.valueField],{value:pe}=D;t.multiple&&Array.isArray(pe)&&pe.some(Ye=>Ye===f)||W(o)}}}e.preventDefault();break;case"ArrowUp":if(e.preventDefault(),t.loading)return;p.value&&((u=I.value)===null||u===void 0||u.prev());break;case"ArrowDown":if(e.preventDefault(),t.loading)return;p.value?(a=I.value)===null||a===void 0||a.next():x();break;case"Escape":p.value&&((0,d.markEventEffectPerformed)(e),y()),(r=b.value)===null||r===void 0||r.focus();break}}function ve(){var e;(e=b.value)===null||e===void 0||e.focus()}function me(){var e;(e=b.value)===null||e===void 0||e.focusInput()}function Qe(){var e;p.value&&((e=ne.value)===null||e===void 0||e.syncPosition())}ue(),(0,l.watch)((0,l.toRef)(t,"options"),ue);const Xe={focus:()=>{var e;(e=b.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=b.value)===null||e===void 0||e.blur()}},ge=(0,l.computed)(()=>{const{self:{menuBoxShadow:e}}=ee.value;return{"--n-menu-box-shadow":e}}),R=m?(0,T.useThemeClass)("select",void 0,ge,t):void 0;return Object.assign(Object.assign({},Xe),{mergedStatus:ke,mergedClsPrefix:g,mergedBordered:A,namespace:w,treeMate:Fe,isMounted:(0,$.useIsMounted)(),triggerRef:b,menuRef:I,pattern:P,uncontrolledShow:z,mergedShow:p,adjustedTo:(0,d.useAdjustedTo)(t),uncontrolledValue:G,mergedValue:D,followerRef:ne,localizedPlaceholder:Ce,selectedOption:oe,selectedOptions:ae,mergedSize:Be,mergedDisabled:N,focused:j,activeWithoutMenuOpen:E,inlineThemeDisabled:m,onTriggerInputFocus:Ve,onTriggerInputBlur:xe,handleTriggerOrMenuResize:Qe,handleMenuFocus:Ue,handleMenuBlur:Ne,handleMenuTabOut:qe,handleTriggerClick:$e,handleToggle:de,handleDeleteOption:W,handlePatternInput:Ge,handleClear:Ke,handleTriggerBlur:ze,handleTriggerFocus:Le,handleKeydown:he,handleMenuAfterLeave:ce,handleMenuClickOutside:Ee,handleMenuScroll:Je,handleMenuKeydown:he,handleMenuMousedown:He,mergedTheme:ee,cssVars:m?void 0:ge,themeClass:R==null?void 0:R.themeClass,onRender:R==null?void 0:R.onRender})},render(){return(0,l.h)("div",{class:`${this.mergedClsPrefix}-select`},(0,l.h)(M.VBinder,null,{default:()=>[(0,l.h)(M.VTarget,null,{default:()=>(0,l.h)(Z.NInternalSelection,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var t,g;return[(g=(t=this.$slots).arrow)===null||g===void 0?void 0:g.call(t)]}})}),(0,l.h)(M.VFollower,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===d.useAdjustedTo.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>(0,l.h)(l.Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var t,g,A;return this.mergedShow||this.displayDirective==="show"?((t=this.onRender)===null||t===void 0||t.call(this),(0,l.withDirectives)((0,l.h)(Z.NInternalSelectMenu,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(g=this.menuProps)===null||g===void 0?void 0:g.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(A=this.menuProps)===null||A===void 0?void 0:A.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var w,m;return[(m=(w=this.$slots).empty)===null||m===void 0?void 0:m.call(w)]},action:()=>{var w,m;return[(m=(w=this.$slots).action)===null||m===void 0?void 0:m.call(w)]}}),this.displayDirective==="show"?[[l.vShow,this.mergedShow],[Y.clickoutside,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[Y.clickoutside,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}})})(_e);(function(s){var v=B.commonjsGlobal&&B.commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0}),s.selectProps=s.NSelect=void 0;var l=_e;Object.defineProperty(s,"NSelect",{enumerable:!0,get:function(){return v(l).default}}),Object.defineProperty(s,"selectProps",{enumerable:!0,get:function(){return l.selectProps}})})(be);const vt=nt({__proto__:null},[be]);exports.index=vt;
