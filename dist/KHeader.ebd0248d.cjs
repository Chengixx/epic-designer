"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),d=require("./index.89664b5e.cjs"),o=require("./revoke.800898d2.cjs"),k={class:"k-modal-footer"},C=e.defineComponent({__name:"KPreview",setup(v,{expose:u}){const a=d.pluginManager.getComponent("Modal"),l=d.pluginManager.getComponent("button"),t=e.ref(!1),c=e.inject("schemas"),f=e.inject("script"),r=e.ref(null),i=e.ref("");function m(){t.value=!1}function h(){t.value=!0,i.value=o.getUUID()}async function p(){const n=await r.value.validate();console.log("\u8868\u5355\u7ED3\u679C\u4E3A\uFF1A",n)}return u({handleOpen:h}),(n,s)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(a)),{title:"\u9884\u89C8",visible:t.value,"onUpdate:visible":s[0]||(s[0]=_=>t.value=_),modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=_=>t.value=_),width:"800px",footer:null},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.unref(d._sfc_main),{key:i.value,ref_key:"kb",ref:r,schemas:e.unref(c),script:e.unref(f)},null,8,["schemas","script"])),e.createElementVNode("div",k,[e.createVNode(e.unref(l),{onClick:m},{default:e.withCtx(()=>[e.createTextVNode("\u5173\u95ED")]),_:1}),e.createVNode(e.unref(l),{type:"primary",onClick:p},{default:e.withCtx(()=>[e.createTextVNode("\u8F93\u51FA\u7ED3\u679C")]),_:1})])]),_:1},40,["visible","modelValue"]))}}),g={class:"k-header"},V={class:"k-header-item"},x=e.createElementVNode("span",{class:"iconfont icon-chexiao2x"},null,-1),N=e.createElementVNode("span",{class:"iconfont icon-fanhui2x"},null,-1),y=e.createElementVNode("div",{class:"k-header-item font-bold font-md"}," k-designer ",-1),b={class:"k-header-item"},w=e.createElementVNode("span",{class:"iconfont icon-yulan",style:{"margin-right":"6px"}},null,-1),E=e.createElementVNode("span",{class:"iconfont icon-yulan",style:{"margin-right":"6px"}},null,-1),B=e.defineComponent({__name:"KHeader",emits:["save"],setup(v,{emit:u}){const a=e.inject("schemas"),l=e.inject("designer"),t=d.pluginManager.getComponent("button"),c=e.ref(null),f=o.revoke.recordList,r=o.revoke.undoList;function i(){c.value.handleOpen()}function m(){const n=o.revoke.undo();!n||(o.deepCompareAndModify(a.value,n),l.setCheckedNode(a.value[0]))}function h(){const n=o.revoke.redo();!n||(o.deepCompareAndModify(a.value,n),l.setCheckedNode(a.value[0]))}function p(){u("save")}return(n,s)=>(e.openBlock(),e.createElementBlock("header",g,[e.createElementVNode("div",V,[e.createVNode(e.unref(t),{onClick:m,size:"small",disabled:!e.unref(f).length},{default:e.withCtx(()=>[x]),_:1},8,["disabled"]),e.createVNode(e.unref(t),{onClick:h,size:"small",disabled:!e.unref(r).length},{default:e.withCtx(()=>[N]),_:1},8,["disabled"])]),y,e.createElementVNode("div",b,[e.createVNode(e.unref(t),{onClick:i,size:"small"},{default:e.withCtx(()=>[w,e.createTextVNode(" \u9884\u89C8")]),_:1}),e.createVNode(e.unref(t),{onClick:p,size:"small"},{default:e.withCtx(()=>[E,e.createTextVNode(" \u4FDD\u5B58")]),_:1})]),e.createVNode(C,{ref_key:"preview",ref:c},null,512)]))}});exports.default=B;
