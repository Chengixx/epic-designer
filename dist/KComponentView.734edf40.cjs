"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),k=require("./vuedraggable.umd.8ad24d24.cjs"),r=require("./index.89664b5e.cjs"),a=require("./revoke.800898d2.cjs");require("./_commonjsHelpers.c9801f70.cjs");require("./_vue_commonjs-external.db6f8c6f.cjs");const _={class:"k-component-view"},V=["onClick"],y=e.defineComponent({__name:"KComponentView",setup(b){const v=r.pluginManager.getComponent("Collapse"),f=r.pluginManager.getComponent("CollapseItem"),c=e.ref([]);c.value=r.pluginManager.getSchemaByGroup();const i=e.inject("schemas"),u=e.inject("designer"),s=e.ref(c.value.map(l=>l.title));function h(l,o){o[l.oldIndex]=a.deepClone({...e.toRaw(o[l.oldIndex]),id:a.getUUID()})}function C(l){var p,g;const o=a.findSchemaById(i.value,(g=(p=u.state.checkedNode)==null?void 0:p.id)!=null?g:"root");if(!o)return!1;let{list:t,schema:n,index:d}=o;n.children&&!["row","tabs"].includes(n.type)&&(t=n.children,d=n.children.length-1);const m=a.deepClone({...e.toRaw(l),id:a.getUUID()});t.splice(d+1,0,m),u.setCheckedNode(m),a.revoke.push(i.value,"\u63D2\u5165\u7EC4\u4EF6")}return(l,o)=>(e.openBlock(),e.createElementBlock("div",_,[e.createVNode(e.unref(v),{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value=t),activeKey:s.value,"onUpdate:activeKey":o[1]||(o[1]=t=>s.value=t)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,t=>(e.openBlock(),e.createBlock(e.unref(f),{title:t.title,header:t.title,name:t.title,key:t.title},{default:e.withCtx(()=>[e.createVNode(e.unref(k.draggable),e.mergeProps({modelValue:t.list,"onUpdate:modelValue":n=>t.list=n},{group:{name:"edit-draggable",pull:"clone",put:!1},sort:!1,animation:180,ghostClass:"moving"},{"item-key":"id","component-data":{name:"list"},onEnd:n=>h(n,t.list)}),{item:e.withCtx(({element:n})=>[e.createElementVNode("div",{class:"source-componet-item",onClick:d=>C(n)},[e.createElementVNode("span",{class:e.normalizeClass(["iconfont",n.icon])},null,2),e.createTextVNode(" "+e.toDisplayString(n.label),1)],8,V)]),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])]),_:2},1032,["title","header","name"]))),128))]),_:1},8,["modelValue","activeKey"])]))}});exports.default=y;
